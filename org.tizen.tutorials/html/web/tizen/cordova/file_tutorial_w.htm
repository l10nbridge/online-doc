<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <link rel="stylesheet" type="text/css" href="../../../css/styles.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/snippet.css" />
    <script type="text/javascript" src="../../../scripts/snippet.js"></script>
    <script type="text/javascript" src="../../../scripts/jquery.util.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../../scripts/common.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../../scripts/core.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../../scripts/search.js" charset="utf-8"></script>
    <title>File</title>
</head>

<body onload="prettyPrint()" style="overflow: auto;">

<div id="toc-navigation">
    <div id="profile">
        <p><img alt="Mobile Web" src="../../../images/mobile_s_w.png"/> <img alt="Wearable Web" src="../../../images/wearable_s_w.png"/></p>
    </div>
    <div id="toc_border"><div id="toc">
        <p class="toc-title">Content</p>
        <ul class="toc">
            <li><a href="#filesystemresolve">Resolving filesystem entries</a></li>
            <li><a href="#directories">Directories operations</a></li>
            <li><a href="#files">Files operations</a></li>
            <li><a href="#readwrite">Reading/writing files content</a></li>
        </ul>
        <p class="toc-title">Related Info</p>
        <ul class="toc">
            <li><a href="../../../../../org.tizen.guides/html/web/tizen/cordova/file_w.htm">File Guide</a></li>
            <li><a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html">File API for Mobile Web</a></li>
            <li><a href="../../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/cordova/file.html">File API for Wearable Web</a></li>
            <li><a href="../../../../../org.tizen.web.apireference/html/device_api/tv/tizen/cordova/file.html">File API for TV Web</a></li>
        </ul>
    </div></div>
</div>

<div id="container"><div id="contents"><div class="content">

<h1>File</h1>

<p>This tutorial demonstrates how to perform actions on filesystem of the device. One could resolve, read, modify files and directories. It is also possible to handle content of files (both reading and writing).</p>

<h2>Prerequisites</h2>
      <p>To use functionalities based on filesystem, application need to have defined privileges in config.xml file:</p>
      <ul>
        <li><p>For reading features:</p>
        <pre class="prettyprint">&lt;tizen:privilege name=&quot;http://tizen.org/privilege/filesystem.read&quot;/&gt;</pre></li>
        <li><p>For writing features:</p>
        <pre class="prettyprint">&lt;tizen:privilege name=&quot;http://tizen.org/privilege/filesystem.write&quot;/&gt;</pre>
        </li>
      </ul>

<!-------------------------------------------------- filesystemresolve -------------------------------------------------->
<h2 id="filesystemresolve">Resolving filesystem entries</h2>
<p>
Resolving inital root for other filesystem operations could be performed in two ways.
</p>
  <ol>
    <li><p>By using <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#LocalFileSystem::requestFileSystem">requestFileSystem()</a> global async method. First it is needed to prepare callback for handling success and failure of operation.</p>
        <pre class="prettyprint">
 successCallback = function(fs) {
     console.log('File system name ' + fs.name);
 };

 errorCallback = function(err) {
     console.log(err.code);
 };
        </pre>
        <p>Second step is to call method with created callbacks. Filesystem request could use temporary or persistent filesystem with defined size.</p>
        <pre class="prettyprint">
 requestFileSystem(TEMPORARY, 1024*1024, successCallback, errorCallback);
        </pre>
<p>
The output:
</p>
<pre class="prettyprint">
  File system name temporary
</pre>
    </li>
    <li><p>By using <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#LocalFileSystem::resolveLocalFileSystemURL">
resolveLocalFileSystemURL()</a> global async method. This method could be used to retrieve <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#DirectoryEntry">DirectoryEntry</a>
 or <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileEntry">FileEntry</a> objects using local URI. First prepare callbacks.</p>
        <pre class="prettyprint">
 successCallback = function(entry) {
     console.log('Entry name ' + entry.name);
 };

 errorCallback = function(err) {
     console.log(err.code);
 };
        </pre>
        <p>Second step is to call method with provided valid uri for existing file or directory, we would like to work with.</p>
        <pre class="prettyprint">
 var uri = 'file:///home/owner/content/Documents/example.txt';
 resolveLocalFileSystemURL(uri, successCallback, errorCallback);
        </pre>
<p>
The output:
</p>
<pre class="prettyprint">
  Entry name example.txt
</pre>
    </li>
  </ol>
<!-------------------------------------------------- filesystemresolve -------------------------------------------------->

<!-------------------------------------------------- directories -------------------------------------------------->
<h2 id="directories">Directories operations</h2>
<ol>
<li>
<p>
To create directory you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#DirectoryEntry::getDirectory"><i>getDirectory</i></a> method.
</p>
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getDirectory("ert",{create:true},function(dir){
     console.log('Created dir: '+dir.name);
  })
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Created dir: ert
</pre>
If options is <em>{create:false}</em> or <em>null</em> entry of existing directory will be return in successCallback.
</li>

<li>
In a similar way, you can create a file. To achieve that you can use  <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#DirectoryEntry::getFile"><i>getFile</i></a> method.
Also if options is <em>{create:false}</em> or <em>null</em> entry of existing file will be return in successCallback.
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getFile("qa.txt",{create:true},function(file){
       console.log('Created file: '+file.name);
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Created file: qa.txt
</pre>
</li>

<li>
To achieve delete a directory and all of its contents, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#DirectoryEntry::removeRecursively"><i>removeRecursively</i></a> method.
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getDirectory("testDirectory", {create:true},
   function(directoryEntry) {
     directoryEntry.removeRecursively(function() {
       console.log("success");
     });
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
success
</pre>
</li>

<li>
To read entries you have to create reader first, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#DirectoryEntry::createReader"><i>createReader</i></a> method.
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function (entry) {
 entry.root.getDirectory("MyDocument", {create:true}, function(dirEntry) {
      var directoryReader = dirEntry.createReader();
  });
});
</pre>
</li>

<li>
Having directoryReader you can read the next block of entries from this directory.Please use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#DirectoryReader::readEntries"><i>readEntries</i></a> method.
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 var a = fs.root.createReader();
 a.readEntries(function successCallback(entries) {
   console.log("success");
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
success
</pre>
</li>

</ol>
<!-------------------------------------------------- directories -------------------------------------------------->

<!-------------------------------------------------- entries -------------------------------------------------->
<h2 id="entries">Entries operations</h2>
<ol>
<li>
<p>
To look up metadata about entry, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#Entry::getMetadata"><i>getMetadata</i></a> method.
</p>
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getMetadata(function (metadata) {
   console.log("Last modification time: " + metadata.modificationTime);// get metadata successfully
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Last modification time: Fri Jan 02 2015 03:58:08 GMT+0900 (KST)
</pre>
</li>

<li>
<p>
To move an entry to a different location on the file system, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#Entry::moveTo"><i>moveTo</i></a> method.
</p>
<pre class="prettyprint">
successCallback = function(entry){console.log('Full path to the moved file: '+entry.fullPath)};
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getDirectory('testDirectory', {create:true}, function(direntry) {
   fs.root.getFile("aa.txt", {create:true}, function(fileentry) {
     console.log('Full path before move: '+fileentry.fullPath);
     fileentry.moveTo(direntry,'newname.txt',successCallback);
   });
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Full path before move: /aa.txt
Full path to the moved file: /testDirectory/newname.txt
</pre>
</li>

<li>
<p>
To copy an entry to a different location on the file system, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#Entry::copyTo"><i>copyTo</i></a> method.
</p>
<pre class="prettyprint">
successCallback = function(entry){console.log('Full path to the copied file: '+entry.fullPath);};
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getDirectory('testDirectory', {create:true},
   function(direntry) {
     fs.root.getFile("test.txt", {create:true},
       function(fileentry) {
         fileentry.copyTo(direntry,'newname.txt',successCallback);
       }
   );
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Full path to the copied file: /testDirectory/newname.txt
</pre>
</li>

<li>
<p>
To look up the parent DirectoryEntry containing this Entry, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#Entry::getParent "><i>getParent </i></a> method. If this Entry is the root of its filesystem, its parent is itself. 
</p>
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getParent(function (entry) {
   console.log("success");
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
success
</pre>
</li>

<li>
<p>
To deletes a file or directory, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#Entry::remove"><i> remove </i></a> method. It is an error to attempt to delete a directory that is not empty. It is an error to attempt to delete the root directory of a filesystem.
</p>
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getFile('test.txt', {create: true}, function(fileEntry) {
   fileEntry.remove(function () {
     console.log("success");
   });
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
success
</pre>
</li>

<li>
<p>
To return a URL that can be used to identify this entry, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#Entry::toURL"><i>toURL</i></a> method.
</p>
<pre class="prettyprint">
requestFileSystem(TEMPORARY, 100, function(fs) {
 fs.root.getDirectory('testDirectory', {create:true},
   function(entry) {
     var url = entry.toURL();
     console.log('URL: '+url);
 });
});
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
URL: file:///home/owner/apps_rw/WfigBlWDyf/tmp/testDirectory/
</pre>
</li>

</ol>
<!-------------------------------------------------- entries -------------------------------------------------->


<!-------------------------------------------------- files -------------------------------------------------->
<h2 id="files">Files operations</h2>
<p>
One could perform operations on files resolved using methods of <a href="#filesystemresolve">resolving file entries</a>. File specific operations are:
</p>
  <ol>
    <li><p><a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileEntry::createWriter">createWriter()</a> which alows to create
    <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileWriter">FileWriter</a> object.</p>
        <pre class="prettyprint">
 var f; // it needs to be FileEntry object resolved using methods presented before
 f.createWriter(function(fileWriter) {
         console.log ('created fileWriter object for ' + fileWriter.fileName);
       });
        </pre>
<p>
The output:
</p>
<pre class="prettyprint">
 created fileWriter object for testFile.txt
</pre>
    </li>
    <li><p>By using <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileEntry::file">
file()</a> one can get a <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#File">File</a> object  that represents the current state of the file that this FileEntry represents.
     </p>
        <pre class="prettyprint">
 var f; // it needs to be FileEntry object resolved using methods presented before
 f.file(function (file) {
         console.log ('created file object for ' + file.name);
       });
        </pre>
<p>
The output:
</p>
<pre class="prettyprint">
 created file object for example.txt
</pre>
    </li>
  </ol>
  </ol>
<!-------------------------------------------------- files -------------------------------------------------->

<!-------------------------------------------------- readwrite -------------------------------------------------->
<h2 id="readwrite">Reading/writing files content</h2>
<ol>
<li>
<p>
To read file and return data as a base64-encoded data URL, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileReader::readAsDataURL"><i>readAsDataURL</i></a> method.
</p>
<pre class="prettyprint">
var blob = new Blob(['abc']);
var fileReader = new FileReader();
fileReader.onload = function(){
    console.log('Loaded, result = '+fileReader.result);
};
fileReader.readAsDataURL(blob);
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Loaded, result = data:;base64,YWJj
</pre>
</li>

<li>
<p>
To read file and return data as a text, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileReader::readAsText"><i>readAsText</i></a> method.
</p>
<pre class="prettyprint">
var blob = new Blob(['abc']);
var fileReader = new FileReader();
fileReader.onload = function(){
    console.log('Loaded, result = '+fileReader.result);
};
fileReader.readAsText(blob);
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Loaded, result = abc
</pre>
</li>

<li>
<p>
To read file and return data as a binary and returns a binary string, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileReader::readAsBinaryString"><i>readAsBinaryString</i></a> method.
</p>
<pre class="prettyprint">
var blob = new Blob(['abc']);
var fileReader = new FileReader();
fileReader.onload = function(){
    console.log('Loaded, result = '+fileReader.result);
};
fileReader.readAsBinaryString(blob);
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Loaded, result = abc
</pre>
</li>

<li>
<p>
To read file and return data as an array buffer and result would be byte[], you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileReader::readAsArrayBuffer"><i>readAsArrayBuffer</i></a> method.
</p>
<pre class="prettyprint">
var blob = new Blob(['abc']);
var fileReader = new FileReader();
fileReader.onload = function(){
    resultValue = fileReader.result;
     console.log("Result: "+resultValue.toString()+' '+'ByteLength: '+resultValue.byteLength);
};
fileReader.readAsArrayBuffer(blob);
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
Result: [object ArrayBuffer]
ByteLength: 3
</pre>
</li>

<li>
<p>
To abort current operation of reading file, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileReader::abort"><i>abort</i></a> method.
</p>
<pre class="prettyprint">
var blob = new Blob(['abc']);
var fileReader = new FileReader();
fileReader.onload = function(){
    console.log('Loaded');
};
fileReader.onabort = function(){
    console.log('aborted');
};
fileReader.readAsDataURL(blob);
fileReader.abort();
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
aborted
</pre>
</li>

<li>
<p>
To writes data to the file, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileWriter::write"><i>write</i></a> method.
</p>
<pre class="prettyprint">
successCallback = function(writer) {
   writer.onwrite = function(evt) {
        console.log('write success');
   };
   writer.write('some sample text');
};
errorCallback = function(err) {
    console.log(err.code);
};
// entry is FileEntry object retrieved by getFile() function of DirectoryEntry interface.
entry.createWriter(successCallback, errorCallback);
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
write success
</pre>
</li>

<li>
<p>
To moves the file pointer to the specified byte, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileWriter::seek "><i>seek</i></a> method.
</p>
<pre class="prettyprint">
successCallback = function(writer) {
   // fast forwards file pointer to the end of file.
   writer.seek(writer.length);
};

errorCallback = function(err) {
    console.log(err.code);
};

// entry is FileEntry object retrieved by getFile() function of DirectoryEntry interface.
entry.createWriter(successCallback, errorCallback);
</pre>
</li>

<li>
<p>
To short the file to the specified length, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileWriter::truncate"><i>truncate</i></a> method.
</p>
<pre class="prettyprint">
successCallback = function(writer) {
writer.onwrite = function(evt) {
        console.log('truncate success');
   };
    writer.truncate(10);
};

errorCallback = function(err) {
    console.log(err.code);
};

// entry is FileEntry object retrieved by getFile() function of DirectoryEntry interface.
entry.createWriter(successCallback, errorCallback);
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
truncate success
</pre>
</li>

<li>
<p>
To abort writing the file, you can use <a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/cordova/file.html#FileWriter::abort"><i>abort</i></a> method.
</p>
<pre class="prettyprint">
successCallback = function(writer) {
   writer.onwrite = function(evt) {
        console.log('write success');
   };
   writer.onabort = function(e){
         console.log('abort');
   };
   writer.write('some sample text');
   writer.abort();
};

errorCallback = function(err) {
    console.log(err.code);
};

// entry is FileEntry object retrieved by getFile() function of DirectoryEntry interface.
entry.createWriter(successCallback, errorCallback);
</pre>
<p>
The output:
</p>
<pre class="prettyprint">
abort
</pre>
</li>

</ol>
<!-------------------------------------------------- readwrite -------------------------------------------------->

<script type="text/javascript" src="../../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../../scripts/showhide.js"></script>

</div></div></div>

<a class="top sms" href="#"><img src="../../../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>
