<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" type="text/css" href="../css/styles.css" />
	<link rel="stylesheet" type="text/css" href="../css/snippet.css" />
	<script type="text/javascript" src="../scripts/snippet.js"></script>
	<script type="text/javascript" src="../scripts/jquery.util.js" charset="utf-8"></script>
	<script type="text/javascript" src="../scripts/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../scripts/core.js" charset="utf-8"></script>
	<script type="text/javascript" src="../scripts/search.js" charset="utf-8"></script>
	<title>Stream-Player Sample Overview</title>
</head>

<body class="no-toc" onload="prettyPrint()" style="overflow: auto;">

<div id="toc-navigation"></div>

<div id="container"><div id="contents"><div class="content">
	<div id="profile">
		<p><img alt="Mobile native" src="../images/mn_icon.png"/></p>
	</div>

<!-- ********************************************************************************** -->

	<h1>Stream-Player Sample Overview</h1>
	<p>This sample demonstrates how to use the Player API to play audio and video files as well as stream media files from the Web.</p>

	<p>	The figure below illustrates the application's view.</p>
	<p class="figure">Figure: Stream-Player application's screen</p>
<p id="app-screenshot" style="text-align:center;">
	<img alt="Application screen" height="364" hspace="20" src="../images/stream-player/stream-player-application-view.png" />
</p>

<p>The sample application's user interface consists of a single view divided into the following sections:
	<ul>
		<li>Toolbar - Allows the user to choose a file to be played, display information about the file, or capture a screenshot from the played video;</li>
		<li>Option Panel - Allows the user to set the volume level, switch the mute option or switch the looping mode;</li>
		<li>Playback options area - Allows the user to set the play, pause and stop options. It also allows to use the seek and playback rate options;</li>
		<li>Display / Album art area - The played video or album art of a music file is displayed here. Note that if the music file does not provide any album art, a musical note image is displayed instead.</li>
	</ul>
</p>

<p class="figure">Figure: Stream-Player layout structure</p>
<p id="layout-structure" style="text-align:center;">
	<img alt="Stream-Player layout structure" height="550" hspace="80" src="../images/stream-player/stream-player-layout-structure.png" />
</p>

<p>The application's workflow can be divided into the following pipelines:
	<ul>
		<li>application initialization;</li>
		<li>local file playback;</li>
		<li>online file playback.</li>
	</ul>
</p>

<p class="figure">Figure: Stream-Player application workflow</p>
<p id="stream-player-application-workflow" style="text-align:center;">
	<img alt="Stream-Player application workflow" height="550" hspace="80" src="../images/stream-player/stream-player-application-workflow.png" />
</p>

<h3>Prerequisites</h3>
<p>
	To ensure proper application execution, the following privileges must be set:
	<ul>
		<li>http://tizen.org/privilege/network.get;</li>
		<li>http://tizen.org/privilege/mediastorage;</li>
		<li>http://tizen.org/privilege/internet;</li>
		<li>http://tizen.org/privilege/network.set;</li>
		<li>http://tizen.org/privilege/content.write;</li>
		<li>http://tizen.org/privilege/appmanager.launch;</li>
		<li>http://tizen.org/privilege/network.profile;</li>
		<li>http://tizen.org/privilege/externalstorage.</li>
	</ul>
</p>

<!-- ********************************************************************************** -->

<h2>Implementation</h2>
<h3>Type Definitions:</h3>
<p> The <span style="font-family: Courier New,Courier,monospace">view_info_s</span> structure contains references to objects created by the view module.</p>
<pre class="prettyprint">
&nbsp;&nbsp;&nbsp;struct view_info_s {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *win;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *conform;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *grid;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *button_panel;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *pause_play_btn;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *toolbar;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *progress_panel;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *seek_slider;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *playback_rate_slider;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *buffer_progress_bar;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *option_panel;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *mute_check;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *display;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *album_art;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *current_popup;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Eina_Bool play_btn_play_mode_on;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int found_storage_id;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Eina_Stringshare *video_path;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Eina_Stringshare *audio_path;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Eina_Stringshare *stream_uri;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Eina_Bool use_stream_album_art;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ecore_Timer *progress_timer;
&nbsp;&nbsp;&nbsp;};
</pre>

<p>The <span style="font-family: Courier New,Courier,monospace">player_s</span> structure contains the objects used in the model.
<pre class="prettyprint">
&nbsp;&nbsp;&nbsp;struct player_s {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player_h player;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Evas_Object *display;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct player_callback_s callbacks;
&nbsp;&nbsp;&nbsp;};
</pre>


<p>The <span style="font-family: Courier New,Courier,monospace">player_callback_s</span> structure contains pointers to callback functions used to send information from the model to the view.</p>

<pre class="prettyprint">
&nbsp;&nbsp;&nbsp;struct player_callback_s {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Player_Status_Changed_cb_t player_status_changed_cb;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Player_Progress_Changed_cb_t player_progress_changed_cb;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Player_Progress_End_cb_t player_progress_end_cb;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Player_Screen_cb_t player_screen_cb;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Player_Message_cb_t player_msg_cb;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Player_Buffer_progress_cb_t player_buffer_progress_cb;
&nbsp;&nbsp;&nbsp;};
</pre>

<p>The following callbacks are provided:</p>
<ul>
	<li><span style="font-family: Courier New,Courier,monospace">Player_Status_Changed_cb_t</span> - invoked when the player's state changes;</li>
	<li><span style="font-family: Courier New,Courier,monospace">Player_Progress_Changed_cb_t</span> - invoked when there is a change in the playback progress e.g. after the user moves the seek slider;</li>
	<li><span style="font-family: Courier New,Courier,monospace">Player_Progress_End_cb_t</span> - invoked when the playback ends. Note that the function is not invoked when the loop mode is used;</li>
	<li><span style="font-family: Courier New,Courier,monospace">Player_Screen_cb_t</span> - invoked when a screenshot is taken;</li>
	<li><span style="font-family: Courier New,Courier,monospace">Player_Message_cb_t</span> - invoked when a text message should be displayed, e.g an error popup;</li>
	<li><span style="font-family: Courier New,Courier,monospace">Player_Buffer_progress_cb_t</span> - invoked when an online file buffer progress changes.</li>
</ul>

<!-- ********************************************************************************** -->

<script type="text/javascript" src="../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>
