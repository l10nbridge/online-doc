<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" type="text/css" href="../css/styles.css" />
	<link rel="stylesheet" type="text/css" href="../css/snippet.css" />
	<script type="text/javascript" src="../scripts/snippet.js"></script>	
	<script type="text/javascript" src="../scripts/jquery.util.js" charset="utf-8"></script>
	<script type="text/javascript" src="../scripts/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../scripts/core.js" charset="utf-8"></script>
	<script type="text/javascript" src="../scripts/search.js" charset="utf-8"></script>

	<title>[UI Sample] Animator Sample Overview</title>  
</head>

<body class="no-toc" onload="prettyPrint()" style="overflow: auto;">

<div id="toc-navigation">
</div>	

<div id="container"><div id="contents"><div class="content">
	<div id="profile">
		<p><img alt="Mobile native" src="../images/mobile_s_n.png"/></p>
	</div>

<h1>[UI Sample] Animator Sample Overview</h1> 
<p>The Animator sample application demonstrates how you can display rectangles with an animation effect using EFL animator and timer functions. Creating an animation requires information, such as how long the animation runs, and having a callback that executes the animation. </p>
<p>For information on creating the sample application project in the IDE, see <a href="../cover_page.htm#create">Creating Sample Applications</a>.</p>
<p>The following figure illustrates the main screen of the Animator. </p>

<p class="figure">Figure: Animator screen</p> 
<p align="center"><img alt="Animator screen" src="../images/animator_sample.png" /></p> 

<p>The application opens with an animation with 2 squares.</p>

<h2 id="Implementation" name="Implementation">Implementation</h2>

<p>The <span style="font-family: Courier New,Courier,monospace;">create_base_gui()</span> function draws 2 different rectangles and calls the <span style="font-family: Courier New,Courier,monospace;">ecore_animator_frametime_set()</span>, <span style="font-family: Courier New,Courier,monospace;">ecore_animator_timeline_add()</span>, <span style="font-family: Courier New,Courier,monospace;">ecore_animator_add()</span>, and <span style="font-family: Courier New,Courier,monospace;">ecore_timer_add()</span> functions to give animation effects.</p>

<pre class="prettyprint">
typedef struct 
appdata 
{
&nbsp;&nbsp;&nbsp;Evas_Object *win;
&nbsp;&nbsp;&nbsp;Evas_Object *layout;
} appdata_s;

static void 
create_base_gui(appdata_s *ad)
{
&nbsp;&nbsp;&nbsp;Evas *evas;
&nbsp;&nbsp;&nbsp;// Window
&nbsp;&nbsp;&nbsp;ad-&gt;win = elm_win_util_standard_add(PACKAGE, PACKAGE);
&nbsp;&nbsp;&nbsp;elm_win_autodel_set(ad-&gt;win, EINA_TRUE);
&nbsp;&nbsp;&nbsp;if (elm_win_wm_rotation_supported_get(ad-&gt;win)) 
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int rots[4] = {0, 90, 180, 270};
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elm_win_wm_rotation_available_rotations_set(ad-&gt;win, (const int *)(&amp;rots), 4);
&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;evas_object_smart_callback_add(ad-&gt;win, &quot;delete,request&quot;, win_delete_request_cb, NULL);
&nbsp;&nbsp;&nbsp;eext_object_event_callback_add(ad-&gt;win, EEXT_CALLBACK_BACK, win_back_cb, ad);
&nbsp;&nbsp;&nbsp;// Base layout
&nbsp;&nbsp;&nbsp;ad-&gt;layout = elm_layout_add(ad-&gt;win);
&nbsp;&nbsp;&nbsp;elm_layout_theme_set(ad-&gt;layout, &quot;layout&quot;, &quot;application&quot;, &quot;default&quot;);
&nbsp;&nbsp;&nbsp;evas_object_size_hint_weight_set(ad-&gt;layout, EVAS_HINT_EXPAND, EVAS_HINT_EXPAND);
&nbsp;&nbsp;&nbsp;evas_object_show(ad-&gt;layout);
&nbsp;&nbsp;&nbsp;// Animator
&nbsp;&nbsp;&nbsp;evas = evas_object_evas_get(ad-&gt;layout);
&nbsp;&nbsp;&nbsp;rect1 = evas_object_rectangle_add(evas);
&nbsp;&nbsp;&nbsp;evas_object_color_set(rect1, 0, 0, 255, 255);
&nbsp;&nbsp;&nbsp;evas_object_resize(rect1, 50, 50);
&nbsp;&nbsp;&nbsp;evas_object_show(rect1);
&nbsp;&nbsp;&nbsp;rect2 = evas_object_rectangle_add(evas);
&nbsp;&nbsp;&nbsp;evas_object_color_set(rect2, 0, 55, 0, 255);
&nbsp;&nbsp;&nbsp;evas_object_resize(rect2, 50, 50);
&nbsp;&nbsp;&nbsp;evas_object_show(rect2);
&nbsp;&nbsp;&nbsp;ecore_animator_frametime_set(1. / 50);
&nbsp;&nbsp;&nbsp;anim1 = ecore_animator_timeline_add(5, _advance_frame1, rect1);
&nbsp;&nbsp;&nbsp;anim2 = ecore_animator_add(_advance_frame3, rect2);
&nbsp;&nbsp;&nbsp;timer1 = ecore_timer_add(10, _start_second_anim, rect1);
&nbsp;&nbsp;&nbsp;timer2 = ecore_timer_add(5, _freeze_third_anim, anim2);
&nbsp;&nbsp;&nbsp;timer3 = ecore_timer_add(10, _thaw_third_anim, anim2);
&nbsp;&nbsp;&nbsp;// Show the window after the base GUI is set up
&nbsp;&nbsp;&nbsp;evas_object_show(ad-&gt;win);
}
</pre>

<p>The <span style="font-family: Courier New,Courier,monospace;">_advance_frame()</span>, <span style="font-family: Courier New,Courier,monospace;">_advance_frame2()</span>, and <span style="font-family: Courier New,Courier,monospace;">_advance_frame3()</span> functions are callbacks that give animation effects by resizing the rectangle for a different time frame, moving the rectangle location and changing the color.</p>

<pre class="prettyprint">
static Eina_Bool 
_advance_frame1(void *data, double pos)
{
&nbsp;&nbsp;&nbsp;double frame = pos;
&nbsp;&nbsp;&nbsp;frame = ecore_animator_pos_map(pos, ECORE_POS_MAP_SPRING, 1.2, 15);
&nbsp;&nbsp;&nbsp;evas_object_resize(data, 50 * (1 + frame), 50 * (1 + frame));
&nbsp;&nbsp;&nbsp;evas_object_move(data, 100 * frame, 100 * frame);
&nbsp;&nbsp;&nbsp;evas_object_color_set(data, 255 * frame, 0, 255 * (1 - frame), 255);

&nbsp;&nbsp;&nbsp;return ECORE_CALLBACK_RENEW;
}

static Eina_Bool 
_advance_frame2(void *data, double pos)
{
&nbsp;&nbsp;&nbsp;double frame = pos;
&nbsp;&nbsp;&nbsp;frame = ecore_animator_pos_map(pos, ECORE_POS_MAP_BOUNCE, 1.2, 50);
&nbsp;&nbsp;&nbsp;evas_object_resize(data, 100 - (50 * frame), 100 - (50 * frame));
&nbsp;&nbsp;&nbsp;evas_object_move(data, 100 * (1 - frame), 100 * (1 - frame));
&nbsp;&nbsp;&nbsp;evas_object_color_set(data, 255 * (1 - frame), 0, 255 * frame, 255);

&nbsp;&nbsp;&nbsp;return ECORE_CALLBACK_RENEW;
}

static Eina_Bool 
_advance_frame3(void *data)
{
&nbsp;&nbsp;&nbsp;static int x = 0;
&nbsp;&nbsp;&nbsp;if (x &gt;= 250)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x = 0;
&nbsp;&nbsp;&nbsp;evas_object_move(data, ++x, 350);

&nbsp;&nbsp;&nbsp;return ECORE_CALLBACK_RENEW;
}
</pre>

<p>The <span style="font-family: Courier New,Courier,monospace;">_start_second_anim()</span>, <span style="font-family: Courier New,Courier,monospace;">_freeze_third_anim</span>, and <span style="font-family: Courier New,Courier,monospace;">_thaw_third_anim</span> functions call the timer, stop the animation, and resume the animation.</p>

<pre class="prettyprint">
static Eina_Bool 
_start_second_anim(void *data)
{
&nbsp;&nbsp;&nbsp;ecore_animator_frametime_set(1. / 10);
&nbsp;&nbsp;&nbsp;ecore_animator_timeline_add(20, _advance_frame2, data);

&nbsp;&nbsp;&nbsp;return ECORE_CALLBACK_CANCEL;
}

static Eina_Bool 
_freeze_third_anim(void *data)
{
&nbsp;&nbsp;&nbsp;ecore_animator_freeze(data);

&nbsp;&nbsp;&nbsp;return ECORE_CALLBACK_CANCEL;
}

static Eina_Bool 
_thaw_third_anim(void *data)
{
&nbsp;&nbsp;&nbsp;ecore_animator_thaw(data);

&nbsp;&nbsp;&nbsp;return ECORE_CALLBACK_CANCEL;
}
</pre>

<script type="text/javascript" src="../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>