<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" type="text/css" href="../../css/styles.css" />
	<link rel="stylesheet" type="text/css" href="../../css/snippet.css" />
	<script type="text/javascript" src="../../scripts/snippet.js"></script>	
	<script type="text/javascript" src="../../scripts/jquery.util.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/core.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/search.js" charset="utf-8"></script>
  <title>Implementing Accessible Applications</title> 
 </head> 
 <body onload="prettyPrint()" style="overflow: auto;">
 
 <div id="toc-navigation">
	<div id="profile">
		<p><img alt="Mobile native" src="../../images/mobile_s_n.png"/></p>
	</div>
	
	<div id="toc_border"><div id="toc">
		<p class="toc-title">Content</p>
		<ul class="toc">
			<li><a href="#good_practices">Good Practices for Implementing Accessibility</a></li>
			<li><a href="#create">Creating an Accessible Application</a></li>
		</ul>
		<p class="toc-title">Related Info</p>
		<ul class="toc">
			<li><a href="../../../../org.tizen.native.mobile.apireference/group__Accessibility.html">Accessibility API for Mobile Native</a></li>	
			</ul>
	</div></div>
</div>	

<div id="container"><div id="contents"><div class="content">

  <h1>Implementing Accessible Applications</h1> 

<p>When implementing an accessible application, follow the good accessibility practices. This topic uses an EFL Elementary sample application to demonstrate how you can implement accessibility features in your application.</p>
  
<h2 id="good_practices" name="good_practices">Good Practices for Implementing Accessibility</h2>

<p>An accessible application requires the following features to be implemented:</p>
<ul>
<li><strong>Available definitions for the screen reader</strong>
<ul>
<li><p>Names, roles, labels, and descriptions</p>
<p>Components used in an application must have defined names, roles, and, when appropriate, descriptions. This allows the screen readers to present them to blind and low-vision users.</p>
<p>In addition, the elements the user can interact with must have clear and concise text labels. For example, a button with an <strong>X</strong> icon and no label works for most users, but for someone using a screen reader the icon is invisible. It is better to use a button labeled <strong>X</strong> or <strong>Cancel</strong> instead of substituting the text for an icon.</p>
</li>
<li>
<p>Text equivalents for images, audio, and multimedia</p>
<p>To a screen reader, any graphics on the screen, such as photos or videos, are invisible. Therefore, images and diagrams conveying important information must have text equivalents for users using screen readers. Such descriptions must briefly present all necessary information. For example, the text equivalent for a circle diagram presenting statistics showing that 20% of the population like product X can be &quot;circle diagram: 20% of the population like X&quot;. Purely decorative images do not need text descriptions, such as &quot;pretty blue background&quot;.</p>
<p>Similarly, it is advised to add text equivalents or subtitles to audio or audio-video content for the benefit of deaf and hard of hearing users.</p>
</li>
</ul>
</li>

<li><strong>Clear and easily readable screen</strong>
<ul>
<li>
<p>Adjustable font size</p>
<p>An adjustable font size is one of the most basic accessibility features. Fonts can be adjusted system-wide or in the settings of a specific application. Providing this feature in your application is a good accessibility practice and can help many low-vision or elderly users.</p>
<p>When implementing your application, leave some extra space in the labels to keep all their text visible when the user decides to set a larger font size. This extra room is also possibly needed when your application is translated into different languages.</p>
</li>
<li>
<p>Adjustable color themes</p>
<p>Color themes are often considered rather a question of aesthetics than usability, but they play an important role in making software more accessible. Adding alternative color themes, such as a high-contrast or reversed-colors mode, can significantly improve the user experience for certain groups of visually-impaired users.</p>
<p>If preparing a complete color theme is too much work, incorporate a basic background and text color changing feature to help users customize the application and adjust it to their needs and preferences.</p>
</li>
<li>
<p>Supplementing color coding</p>
<p>Color coding must not be the only way of conveying information since some people are not able to distinguish between different colors. This does not only concern individuals with diagnosed color vision disabilities, as it is estimated that about 10% of the male population is color blind to some extent. Even contrasting color pairs can be an issue, such as the commonly used red and green.</p>
<p>Color coding can and must be used, but it must always be supplemented by other means of conveying the same information, such as appropriate labels, graphics, or font formatting.</p>
<p>For example, do not ask the user to &quot;press the green button to confirm or the red button to reject&quot; and supply 2 colored but otherwise identical buttons. Instead, add <strong>Confirm</strong> and <strong>Reject</strong> labels to the buttons. If you do not have enough room for that much text, use a symbolic label like <strong>OK</strong> and <strong>X</strong>.</p>
</li>
<li>
<p>Minimalism</p>
<p>Overloading the screen with lots of elements is undesirable both in terms of accessibility and usability in general. Users with physical disabilities or poor vision can find it difficult to operate very small components, while those with developmental or attention disabilities can feel overwhelmed by a complex layout. Even non-disabled users can be confused by a component-packed screen and have difficulty navigating through it, especially when operating the device on the go or using just one hand.</p>
</li>
<li>
<p>No flickering or blinking content</p>
<p>Flickering elements can trigger epileptic seizures. This most often occurs when the parts of the screen blink at a rate of about 20 Hz. Because flickering at any rate between about 5 and 60 Hz is potentially dangerous to users with photosensitive epilepsy, avoid flickering or blinking elements and animations altogether.</p>
</li>
</ul>
</li>
<li><strong>Easy navigation and user interactions</strong>
<ul>
<li>
<p>Simple navigation flow</p>
<p>The navigation flow within an application must be as simple and intuitive as possible. It must be predictable and take into account the most common tasks that are performed by the user. Additionally, users must be able to operate the application without learning many complex new gestures as both physically disabled and low-vision users can find it difficult to perform certain gestures.</p>
</li>
<li>
<p>Time responses</p>
<p>When your content requires the user to respond in a limited amount of time, make this time window large enough. It is possible that less proficient or disabled users do not manage to respond quickly. A good practice is to add a response indicating that the user needs more time to perform the task or making the response time user-configurable.</p>
</li>
</ul>
</li>
</ul>

<h2 id="create" name="create">Creating an Accessible Application</h2>  

<p>You can use the mobile native <a href="https://developer.tizen.org/development/sample/native/UI/UI_Components" target="_blank">UI Components</a> sample application provided within the SDK to see how the most important accessibility features are implemented in practice. The sample application contains an AT-SPI2 compliant screen reader, which you can use to test the accessibility features in a device. Enable the screen reader by running the sample application and selecting <strong>Accessibility &gt; Screen Reader &gt; Screen Reader (TTS)</strong>.</p>
<p>In the Tizen 2.4 release, the screen reader is available only inside the UI Components application. This means that when the UI Components application is terminated or paused and sent to the background, the screen reader is automatically disabled, and when the UI Components application is restored, the screen reader is enabled.</p>

<p class="figure">Figure: UI Components sample application</p>
<p align="center"><img src="../../images/ui-controls.png" alt="UI Components sample application" /> <img src="../../images/ui-controls-accessibility.png" alt="UI Components sample application" /> <img src="../../images/ui-controls-accessibility-screen-reader.png" alt="Screen reader" /></p>

<table class="note">
    <tbody>
        <tr>
            <th class="note">Note</th>
        </tr>
        <tr>
            <td class="note">If reading of any arbitrary text directly from the application needs to be synchronized with the screen reader voice output, you must use the Tizen platform TTS API (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__UIX__TTS__MODULE.html">mobile</a> and <a href="../../../../org.tizen.native.wearable.apireference/group__CAPI__UIX__TTS__MODULE.html">wearable</a> applications), which is also used by the screen reader.</td>
		</tr>
	</tbody>
</table>

<h3>Making UI Components Readable</h3>

<p>Since the screen reader is a fundamental accessibility feature for visually-impaired or blind persons, making your application readable by the screen reader is a priority task. The following example shows how to make your application readable to the AT-SPI2 compliant screen reader.</p> 
<p>The screen reader reads out information about the currently pointed or focused UI component. The UI component information is provided to the screen reader using the AT-SPI2 standard protocol and consists of the following information items:</p>

<ul>
<li>Label: 
<p>The label on the component is, for example, <strong>Ok</strong> or <strong>Cancel</strong> (in case of a button). The label maps to the <span style="font-family: Courier New,Courier,monospace">name</span> property of the AT-SPI2 object and is equivalent to the result of the <span style="font-family: Courier New,Courier,monospace">elm_object_text_get()</span> function. The property can be also overwritten using the <span style="font-family: Courier New,Courier,monospace">elm_atspi_accessible_name_set()</span> function.</p>
</li>
<li>Traits: 
<p>The traits are the component type or role, for example, <span style="font-family: Courier New,Courier,monospace">&quot;Button&quot;</span> (in case of a button). The trait maps to the <span style="font-family: Courier New,Courier,monospace">role</span> property of the AT-SPI2 object.</p>
</li>
<li>State: 
<p>The value or status of the component is, for example, <span style="font-family: Courier New,Courier,monospace">&quot;Disabled&quot;</span> (in case of a disabled button).</p>
</li>
<li>Description (optional attribute): 
<p>The hint or guide to explain the component is, for example, &quot;This button closes your application&quot; (in case of a button). The description maps to the <span style="font-family: Courier New,Courier,monospace">description</span> property of the AT-SPI2 object.</p>
</li>
</ul>

<p>The screen reader reads the information in the following order when the user selects the button by using the 1-finger-tap gesture. The user also can select a button by using a 1-finger-touch-and-move gesture.</p>
<ul>
<li><strong>Ok</strong> (Label) &gt; &quot;Button&quot; (Traits) &gt; &quot;This button closes your application&quot; (Description)</li>
<li><strong>Cancel</strong> (Label) &gt; &quot;Button&quot; (Traits) &gt; &quot;Disabled&quot; (State)</li>
</ul>

<p>The following table lists the functions you can use to set EFL Elementary UI component information to be read by the screen reader, and to support internationalization (i18n) for the information.</p>

<table>
	<caption>Table: Functions for making UI components readable</caption>
	<tbody>
	<tr>
		<th>Function</th>
		<th>Description</th>
	</tr>
	<tr>
		<td><span style="font-family: Courier New,Courier,monospace">void elm_atspi_accessible_name_set(Elm_Interface_Atspi_Accessible *obj, const char *text)</span></td>
		<td>Set a text of an object.
		<ul>
		<li><span style="font-family: Courier New,Courier,monospace">obj</span>: Elementary object</li>
		<li><span style="font-family: Courier New,Courier,monospace">text</span>: New accessible name for the object</li>
		</ul>
		</td>
	</tr>
	<tr>
		<td><span style="font-family: Courier New,Courier,monospace">void elm_atspi_accessible_role_set(Elm_Interface_Atspi_Accessible *obj, Elm_Atspi_Role role)</span></td>
		<td>Set the accessible role. 
		<ul>
		<li><span style="font-family: Courier New,Courier,monospace">obj</span>: Elementary object</li>
		<li><span style="font-family: Courier New,Courier,monospace">role</span>: New accessible role for the object</li>
		</ul>
		</td>
	</tr>
	<tr>
		<td><span style="font-family: Courier New,Courier,monospace">void elm_atspi_accessible_description_set(Elm_Interface_Atspi_Accessible *obj, const char *text)</span></td>
		<td>Set the accessible description.
		<ul>		
		<li><span style="font-family: Courier New,Courier,monospace">obj</span>: Elementary object</li>
		<li><span style="font-family: Courier New,Courier,monospace">text</span>: Description text for the object</li>
		</ul>
		</td>
	</tr>
	<tr>
		<td><span style="font-family: Courier New,Courier,monospace">void elm_atspi_accessible_translation_domain_set(Elm_Interface_Atspi_Accessible *obj, const char *domain)</span></td>
		<td>Bind the translation domain to the accessible object.
		<ul>
		<li><span style="font-family: Courier New,Courier,monospace">obj</span>: Elementary object</li>
		<li><span style="font-family: Courier New,Courier,monospace">domain</span>: Translation domain (name space for translation keys)</li>
		</ul>
		</td>
	</tr>
  </tbody>
  </table>
  

   
   <p class="figure">Figure: Readable components in the UI Components sample</p>
   <p align="center"><img src="../../images/ui-controls-accessibility-screen-reader-ui-description.png" alt="Readable components in the UI Components sample" />
  </p>
  
  <p>The Elementary library sets the default information (label, traits, state) for the components, except for an icon and image. You can override the default information in various ways:</p>
  <ul>
  <li>Button with a custom name
  <p>Use the <span style="font-family: Courier New,Courier,monospace">elm_object_text_set()</span> function to define a custom name.</p>
<pre class="prettyprint">
// File: src/accessibility/screen_reader/description.c

btn = elm_button_add(layout);
elm_object_text_set(btn, &quot;Test Name&quot;);
</pre> 
 <p>If the user highlights the button, the screen reader says &quot;Test Name, button&quot; (it reads out the component custom name and default trait).</p>
</li>

   <li>Button without a name and description
 <p>If you define a button with an icon image only, no name or description is provided by default.</p>  
<pre class="prettyprint">
// File: src/accessibility/screen_reader/description.c

btn = elm_button_add(layout);
img = elm_image_add(btn);
elm_image_file_set(img, IMG_PATH, NULL);
elm_object_part_content_set(btn, &quot;icon&quot;, img);
</pre>
<p>If the user highlights the button, the screen reader says &quot;button&quot; (it reads out the component default trait only).</p>
</li>

<li>Button with an internationalized description
  <p>Use the <span style="font-family: Courier New,Courier,monospace">elm_atspi_accessible_description_set()</span> function to define a description. To make multiple language versions available define the actual description strings in PO files and use the <span style="font-family: Courier New,Courier,monospace">elm_atspi_accessible_translation_domain_set()</span> function to bind the translation domain to the component.</p>
<pre class="prettyprint">
// File: CMakeLists.txt

# i18n
ADD_SUBDIRECTORY(po)

// File: packaging/ui-controls.spec

BuildRequires:  gettext-tools

/opt/usr/apps/org.tizen.ui-controls/res/locale/&lt;any language, use asterisk&gt;/LC_MESSAGES/&lt;any file, use asterisk&gt;

// File: po/CMakeLists.txt

SET(POFILES en_US.po it_IT.po)
SET(MSGFMT &quot;/usr/bin/msgfmt&quot;)

FOREACH(pofile ${POFILES})
&nbsp;&nbsp;&nbsp;SET(pofile ${CMAKE_CURRENT_SOURCE_DIR}/${pofile})
&nbsp;&nbsp;&nbsp;MESSAGE(PO: &quot;  ${pofile}&quot;)
&nbsp;&nbsp;&nbsp;GET_FILENAME_COMPONENT(absPofile ${pofile} ABSOLUTE)
&nbsp;&nbsp;&nbsp;GET_FILENAME_COMPONENT(lang ${absPofile} NAME_WE)
&nbsp;&nbsp;&nbsp;SET(moFile ${CMAKE_CURRENT_BINARY_DIR}/${lang}.mo)
&nbsp;&nbsp;&nbsp;ADD_CUSTOM_COMMAND(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OUTPUT ${moFile}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMMAND ${MSGFMT} -o ${moFile} ${absPofile}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEPENDS ${absPofile})
&nbsp;&nbsp;&nbsp;INSTALL(FILES ${moFile}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DESTINATION ${LOCALEDIR}/${lang}/LC_MESSAGES RENAME ${PACKAGE}.mo)
&nbsp;&nbsp;&nbsp;SET(moFiles ${moFiles} ${moFile})
ENDFOREACH(pofile)

ADD_CUSTOM_TARGET(po ALL DEPENDS ${moFiles})

// File: po/en_US.po

msgid &quot;IDS_BUTTON_DESCRIPTION&quot;
msgstr &quot;One finger double tap to activate&quot;

msgid &quot;IDS_BUTTON_NAME&quot;
msgstr &quot;Button accessibility name&quot;

// File: po/it_IT.po

msgid &quot;IDS_BUTTON_DESCRIPTION&quot;
msgstr &quot;Un dito doppio tap per attivare&quot;

msgid &quot;IDS_BUTTON_NAME&quot;
msgstr &quot;Button nome di accessibilità&quot;

// File: src/main.c

// Bind package locale file
bindtextdomain (PACKAGE, LOCALE_DIR);
textdomain (PACKAGE);

// File: src/accessibility/screen_reader/description.c

btn = elm_button_add(layout);
elm_object_text_set(btn, &quot;Test Name&quot;);
elm_object_style_set(btn, &quot;default&quot;);
elm_object_part_content_set(layout, &quot;button_description&quot;, btn);
elm_atspi_accessible_description_set(btn, &quot;IDS_BUTTON_DESCRIPTION&quot;);
elm_atspi_accessible_translation_domain_set(btn, PACKAGE);
</pre>

 <p>If the user highlights the button and the display language is set to English (US), the screen reader says &quot;Test Name, button, one finger double tap to activate&quot; (it reads out the component custom name, default trait, and description from the <span style="font-family: Courier New,Courier,monospace">en_US.po</span> file). If the display language is changed, the description string from the relevant PO file is used.</p>
</li>

 <li>Button with an accessible name
 <p>Use the <span style="font-family: Courier New,Courier,monospace">elm_atspi_accessible_name_set()</span> function to define an accessible name.</p>
<pre class="prettyprint">
// File: src/accessibility/screen_reader/description.c

btn = elm_button_add(layout);
elm_object_text_set(btn, &quot;Test Name&quot;);
elm_object_style_set(btn, &quot;default&quot;);
elm_object_part_content_set(layout, &quot;button_a11y_name&quot;, btn);
elm_atspi_accessible_name_set(btn, &quot;IDS_BUTTON_NAME&quot;);
elm_atspi_accessible_translation_domain_set(btn, PACKAGE);
</pre>

<p>If the user highlights the button, the screen reader says &quot;Button accessibility name, button&quot;  (it reads out the component accessible name from the <span style="font-family: Courier New,Courier,monospace">en_US.po</span> file and the default trait). If the display language is changed, the accessible name string from the relevant PO file is used.</p>
<p>The <span style="font-family: Courier New,Courier,monospace">elm_atspi_accessible_name_set()</span> function overrides the custom name set earlier with the <span style="font-family: Courier New,Courier,monospace">elm_object_text_set()</span> function.</p>
</li>
</ul>

<p>You can also create a custom reading of multi-style components. Sometimes, it is necessary to have different voice output depending on the style assigned to the UI component. The <span style="font-family: Courier New,Courier,monospace">default</span> style is handled &quot;out of the box&quot; by the accessibility framework, but you must handle any alternative styles on the application side. The elementary checkbox component and Tizen 2.4 UX guideline for the screen reader offer a good example of alternative styles:</p>
<ul>
<li><span style="font-family: Courier New,Courier,monospace">default</span> style in a checkbox: 
<p>The reading must be &quot;&lt;label&gt;, &lt;state&gt;&quot;, where &lt;label&gt; is a text assigned to the checkbox and &lt;state&gt; is read as &quot;selected&quot; or &quot;not selected&quot;, depending on the checkbox state.</p></li>
<li><span style="font-family: Courier New,Courier,monospace">favorite</span> style in a checkbox: 
<p>The reading must be &quot;Favorite button, &lt;state&gt;&quot;, where &lt;state&gt; is read as &quot;selected&quot; or &quot;not selected&quot;, depending on the checkbox state.</p></li>
<li><span style="font-family: Courier New,Courier,monospace">on&amp;off</span> style in a checkbox: 
<p>The reading must be &quot;On/off button, &lt;state&gt;&quot;, where &lt;state&gt; is read as &quot;on&quot; or &quot;off&quot;, depending on the checkbox state.</p></li>
</ul>
<p>The following source code snippet demonstrates how to handle the <span style="font-family: Courier New,Courier,monospace">favorite</span> and <span style="font-family: Courier New,Courier,monospace">on&amp;off</span> checkbox styles in the application source code:</p>

<pre class="prettyprint">
// File: src/check.c

check = elm_check_add(box);
elm_object_style_set(check, &quot;favorite&quot;);
elm_atspi_accessible_name_set(check, &quot;Favorite button&quot;);

check = elm_check_add(box);
elm_object_style_set(check, &quot;on&amp;off&quot;);
elm_atspi_accessible_role_set(check, ELM_ATSPI_ROLE_TOGGLE_BUTTON);
elm_atspi_accessible_name_set(check, &quot;On, off&quot;);
</pre>


<h3>Setting the UI Reading Order</h3>

<p>The following table lists the functions you can use to customize the order in which the screen reader covers the UI components on the screen.</p>
<table>
	<caption>Table: Functions for setting the reading order</caption>
	<tbody>
	<tr>
		<th>Function</th>
		<th>Description</th>
	</tr>
	<tr>
		<td><span style="font-family: Courier New,Courier,monospace">Eina_Bool elm_atspi_accessible_relationship_append(Elm_Interface_Atspi_Accessible *obj, Elm_Atspi_Relation_Type type, const Elm_Interface_Atspi_Accessible *relation_object)</span></td>
		<td>Append the relation to the relation set of a certain object or component object.
		<ul>
		<li><span style="font-family: Courier New,Courier,monospace">obj</span>: Elementary accessible object (relation source)</li>
		<li><span style="font-family: Courier New,Courier,monospace">type</span>: Type of the ATSPI relation</li>
		<li><span style="font-family: Courier New,Courier,monospace">relation_object</span>: Relation target object</li>
		</ul>
		</td>
	</tr>
	<tr>
		<td><span style="font-family: Courier New,Courier,monospace">void elm_atspi_accessible_relationship_remove(Elm_Interface_Atspi_Accessible *obj, Elm_Atspi_Relation_Type type, const Elm_Interface_Atspi_Accessible *relation_object)</span></td>
		<td>Remove the relation from the relation set of a certain object or component object.
		<ul>
		<li><span style="font-family: Courier New,Courier,monospace">obj</span>: Elementary accessible object (relation source)</li>
		<li><span style="font-family: Courier New,Courier,monospace">type</span>: Type of the ATSPI relation</li>
		<li><span style="font-family: Courier New,Courier,monospace">relation_object</span>: Relation target object</li>
		</ul>
		</td>
	</tr>
</tbody>
</table>


<p>The following figure illustrates the UI reading order example in the UI Components sample application. In the top part of the screen, the components have been ordered explicitly by the developer by setting the ATSPI standard relations between accessible objects corresponding to these components. In the bottom part of the screen, the components have no relation-based navigation set at all. This results in the natural reading order of the UI elements maintained implicitly by the screen reader itself. The natural reading order is a heuristic based on the UI elements&#39; geometrical position on the screen (top to bottom, and left to right reading direction).</p>

<p class="figure">Figure: UI reading order in the UI Components sample</p>
<p align="center"><img src="../../images/ui-controls-accessibility-screen-reader-ui-reading-order.png" alt="UI reading order in the UI Components sample" />
</p>

<p>The following code illustrates how the customized reading order for the top part of the screen has been implemented. The component relations are defined with <span style="font-family: Courier New,Courier,monospace">ATSPI_RELATION_FLOWS_TO</span> and <span style="font-family: Courier New,Courier,monospace">ATSPI_RELATION_FLOWS_FROM</span> parameters. In addition to the normal relations used when navigating forward, inverse relations are defined as well to ensure proper behavior when navigating backward.</p>
 
<p>You can have various independent relation-based navigation chains on one screen. Each relation-based navigation chain is resolved locally and has priority over the default navigation order maintained by the screen reader. When one of the ends of a relation-based navigation chain is reached, the highlight frame goes forward along to the actual navigation direction to the closest component in the default navigation order. It omits interim components of the relation-based navigation chains. In this example, when the navigation command &quot;next&quot; is called from the <strong>c</strong> button, the highlight frame goes from the <strong>c</strong> button to the <strong>Default reading order</strong> label.</p>

<pre class="prettyprint">
// File: src/accessibility/screen_reader/reading_order.c

Evas_Object *btnA;
Evas_Object *btnB;
Evas_Object *btnC;
Evas_Object *btnD;
Evas_Object *btnE;
Evas_Object *labelCustom;

// Creating buttons with custom order
btnA = elm_button_add(layout);
elm_object_text_set(btnA, &quot;a&quot;);

// Inform the assistive technology that UI information must be presented in following order (btnA is by-passed)
elm_atspi_accessible_relationship_append(labelCustom, ELM_ATSPI_RELATION_FLOWS_TO, btnD);
elm_atspi_accessible_relationship_append(btnD, ELM_ATSPI_RELATION_FLOWS_TO, btnE);
elm_atspi_accessible_relationship_append(btnE, ELM_ATSPI_RELATION_FLOWS_TO, btnB);
elm_atspi_accessible_relationship_append(btnB, ELM_ATSPI_RELATION_FLOWS_TO, btnC);

// Inverse relations
elm_atspi_accessible_relationship_append(btnC, ELM_ATSPI_RELATION_FLOWS_FROM, btnB);
elm_atspi_accessible_relationship_append(btnB, ELM_ATSPI_RELATION_FLOWS_FROM, btnE);
elm_atspi_accessible_relationship_append(btnE, ELM_ATSPI_RELATION_FLOWS_FROM, btnD);
elm_atspi_accessible_relationship_append(btnD, ELM_ATSPI_RELATION_FLOWS_FROM, labelCustom);
</pre>

<p>Navigation relations can also be used to exclude some components from the sequential navigation (for example, they are not reachable using the &quot;next&quot; or &quot;previous&quot; navigation commands triggered on 1-finger flicks). In the example, the <strong>a</strong> button was by-passed by setting a navigation relation between the <strong>Custom reading order</strong> label and the <strong>d</strong> button. However, the <strong>a</strong> button can still be reached by direct navigation (1-finger single tap or 1-finger hover). To entirely exclude the component from navigation (including direct navigation), set the <span style="font-family: Courier New,Courier,monospace">ATSPI_ROLE_REDUNDANT_OBJECT</span> role for the component using the <span style="font-family: Courier New,Courier,monospace">elm_atspi_accessible_role_set()</span> function.</p>


<h3>Customizing the Highlight Frame</h3>
<p>The accessibility framework provides a highlight frame around the currently selected or focused UI component, and you can customize its size, shape, and color. The following code snippets demonstrate how to adjust the style of the highlight frame from the default yellow style (left in the figure) to  a custom red style (right in the figure).</p>

<p class="figure">Figure: Highlight frame in the UI Components sample</p> 
<p align="center"><img alt="Highlight frame in the UI Components sample" src="../../images/ui-controls-accessibility-screen-reader-ui-custom-frame-1.png" /> <img alt="Highlight frame in the UI Components sample" src="../../images/ui-controls-accessibility-screen-reader-ui-custom-frame-2.png" /></p> 

<p>The following code snippets has been simplified to make the example clearer. Irrelevant code has been omitted, and long variables and resource names have been shortened to avoid line wrapping. The full version of the source code is available in the following files:</p>

<ul>
<li><span style="font-family: Courier New,Courier,monospace">CMakeLists.txt</span></li>
<li><span style="font-family: Courier New,Courier,monospace">edc_resource/accessibility/screen_reader/custom_frame.edc</span></li>
<li><span style="font-family: Courier New,Courier,monospace">edc_resource/default/inc/my_button_header.edc</span></li>
<li><span style="font-family: Courier New,Courier,monospace">edc_resource/default/my_button.edc</span></li>
<li><span style="font-family: Courier New,Courier,monospace">inc/main.h</span></li>
<li><span style="font-family: Courier New,Courier,monospace">res/images/btn_style_nor.png</span></li>
<li><span style="font-family: Courier New,Courier,monospace">res/images/btn_style_sel.png</span></li>
<li><span style="font-family: Courier New,Courier,monospace">res/images/core_dropdown_label_icon_arrow.png</span></li>
<li><span style="font-family: Courier New,Courier,monospace">res/images/custom_highlight.png</span></li>
<li><span style="font-family: Courier New,Courier,monospace">res/images/custom_highlight2.png</span></li>
<li><span style="font-family: Courier New,Courier,monospace">res/ui-controls.edc</span></li>
<li><span style="font-family: Courier New,Courier,monospace">src/accessibility/screen_reader.c</span></li>
<li><span style="font-family: Courier New,Courier,monospace">src/accessibility/screen_reader/custom_frame.c</span></li>
</ul>

<p>In the <span style="font-family: Courier New,Courier,monospace">edc_resource/default/my_button.edc</span> file, define the custom style for the component. In this example, the highlight frame for the button is changed.</p>
<ol>
<li>Mark that the component can render the accessibility highlight frame by setting value of the <span style="font-family: Courier New,Courier,monospace">access_highlight</span> property to <span style="font-family: Courier New,Courier,monospace">on</span>.</li>
<li>Register the <span style="font-family: Courier New,Courier,monospace">c_h_2.png</span> graphical resource, which contains the custom frame image.</li>
<li>Define a new <span style="font-family: Courier New,Courier,monospace">highlight</span> part with 2 states: <span style="font-family: Courier New,Courier,monospace">default</span> and <span style="font-family: Courier New,Courier,monospace">visible</span>. In the <span style="font-family: Courier New,Courier,monospace">default</span> state, use the resource registered in the previous step to set the value of the <span style="font-family: Courier New,Courier,monospace">image.normal</span> property.</li>
<li>Program both states to show or hide the accessibility highlight frame on signals:
<ul>
<li><span style="font-family: Courier New,Courier,monospace">elm,action,access_highlight,show</span></li>
<li><span style="font-family: Courier New,Courier,monospace">elm,action,access_highlight,hide</span></li></ul>
</li>
</ol>

<pre class="prettyprint">
group 
{ 
&nbsp;&nbsp;&nbsp;name: &quot;elm/button/base/custom2&quot;;

&nbsp;&nbsp;&nbsp;data.item: &quot;access_highlight&quot; &quot;on&quot;;
&nbsp;&nbsp;&nbsp;images.image: &quot;../../res/images/c_h_2.png&quot; COMP;

&nbsp;&nbsp;&nbsp;parts 
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;part
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: &quot;highlight&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clip_to: &quot;highlight_clip&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;description 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state: &quot;default&quot; 0.0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image.normal: &quot;../../res/images/c_h_2.png&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image.border: 10 10 10 10;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image.middle: 0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fill.smooth: 0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel1.to: &quot;elm.text&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel1.offset: 30 5;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel2.to: &quot;elm.text&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rel2.offset: -30 0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visible: 0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;description 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state: &quot;visible&quot; 0.0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inherit: &quot;default&quot; 0.0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;visible: 1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;programs 
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;program 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: &quot;show_new_highlight&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: &quot;elm,action,access_highlight,show&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source: &quot;elm&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action: STATE_SET &quot;visible&quot; 0.0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target: &quot;highlight&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;program 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: &quot;hide_new_highlight&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: &quot;elm,action,access_highlight,hide&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source: &quot;elm&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action: STATE_SET &quot;default&quot; 0.0;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;target: &quot;highlight&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;}
}
</pre>

<p>In the <span style="font-family: Courier New,Courier,monospace">src/accessibility/screen_reader/custom_frame.c</span> file, assign the style defined above to the button component using the <span style="font-family: Courier New,Courier,monospace">elm_object_style_set()</span> function, where the second parameter is the last segment of the <span style="font-family: Courier New,Courier,monospace">elm/button/base/custom2</span> group name defined in the EDC file.</p>

<pre class="prettyprint">
static Evas_Object* 
create_custom_frame(Evas_Object *parent)
{
&nbsp;&nbsp;&nbsp;Evas_Object *btn;
&nbsp;&nbsp;&nbsp;Evas_Object *layout;
	
&nbsp;&nbsp;&nbsp;layout = elm_layout_add(parent);

&nbsp;&nbsp;&nbsp;btn = elm_button_add(layout);

&nbsp;&nbsp;&nbsp;elm_object_style_set(btn, &quot;custom2&quot;);

&nbsp;&nbsp;&nbsp;return layout;
}</pre>

  
<script type="text/javascript" src="../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>