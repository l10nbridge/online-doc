<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <link rel="stylesheet" type="text/css" href="../../css/styles.css" />
    <link rel="stylesheet" type="text/css" href="../../css/snippet.css" />
    <script type="text/javascript" src="../../scripts/snippet.js"></script>
    <script type="text/javascript" src="../../scripts/jquery.util.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../scripts/common.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../scripts/core.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../scripts/search.js" charset="utf-8"></script>
  <title>Near Field Communication (NFC)</title>
 </head>
 <body onload="prettyPrint()" style="overflow: auto;">

 <div id="toc-navigation">
    <div id="profile">
        <p><img alt="Mobile Web" src="../../images/mobile_s_w_optional.png"/> <img alt="Wearable Web" src="../../images/wearable_s_w_optional.png"/></p>
    </div>

    <div id="toc_border"><div id="toc">
		<p class="toc-title">Dependencies</p>
		<ul class="toc">
			<li>Tizen Platform 2.4 and Higher for Mobile</li>
			<li>Tizen Platform 2.3.1 and Higher for Wearable</li>
		</ul>
        <p class="toc-title">Content</p>
        <ul class="toc">
			<li><a href="#ndef">NDEF Messages</a></li>
			<li><a href="#prerequisites">Prerequisites</a></li>
            <li><a href="#Managing_NFC_Conn">Managing NFC Connectivity</a></li>
            <li><a href="#Detecting_NFC_Tags" >Detecting NFC Tags and Peer Devices</a></li>
			<li>NDEF data
			<ul class="toc">
            <li><a href="#Handling_NDEF_Messages">Handling NDEF Messages</a></li>
            <li><a href="#Exchanging_NDEF_Peers">Exchanging NDEF Data with Peers</a></li>
            <li><a href="#Exchanging_NDEF_Tags">Exchanging NDEF Data with Tags</a></li>
			</ul></li>
            <li><a href="#Using_NFC_Card_Emulation">Using NFC Card Emulation</a></li>
			<li><a href="#Using_NFC_Host_Based_Card_Emulation">Using NFC Host-based Card Emulation</a></li>
        </ul>		
		<p class="toc-title">Related Info</p>
        <ul class="toc">
			<li><a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html">NFC API for Mobile Web</a></li>
			<li><a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html">NFC API for Wearable Web</a></li>
			<li><a href="https://developer.tizen.org/development/sample/web/Communication/Contacts_Exchanger" target="_blank">Contacts Exchanger Sample Description</a></li>
        </ul>
    </div></div>
</div>

<div id="container"><div id="contents"><div class="content">
<h1>Near Field Communication (NFC)</h1>
 
  <p>Near Field Communication (NFC) service enables information exchange between NFC-enabled devices (called &quot;peers&quot;) or tags. The NFC-enabled devices can share contacts, photos, and videos, and can also act as smart cards. You can use an NFC-enabled device to communicate with NFC tags for a variety of activities, such as paying the grocery bill or downloading a coupon.</p>
  
 <p>This feature is supported in mobile and wearable applications only.</p>
  
  <p>NFC provides the following advantages over short-range communication technologies, such as Bluetooth:</p>
  <ul>
   <li>Faster set-up</li>
   <li>Lower power consumption</li>
   <li>No device pairing requirements</li>
   <li>Reduction in unwanted interruptions</li>
  </ul>
  <p>An NFC tag is a chip which can securely store personal information, such as debit card numbers or contact details. The methods of the <span style="font-family: Courier New,Courier,monospace">NFCTag</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCTag">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCTag">wearable</a> applications) are used to access an NFC tag for reading or writing information. NFC tag types are identified using the <span style="font-family: Courier New,Courier,monospace">type</span> attribute of the <span style="font-family: Courier New,Courier,monospace">NFCTagType</span> type definition (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCTagType">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCTagType">wearable</a> applications).</p>
  <table class="note">
   <tbody>
    <tr>
     <th class="note">Note</th>
    </tr>
    <tr>
     <td class="note">Tizen provides the following NFC tag types: <span style="font-family: Courier New,Courier,monospace">GENERIC_TARGET</span>, <span style="font-family: Courier New,Courier,monospace">ISO14443_A</span>, <span style="font-family: Courier New,Courier,monospace">ISO14443_4A</span>, <span style="font-family: Courier New,Courier,monospace">ISO14443_3A</span>, <span style="font-family: Courier New,Courier,monospace">MIFARE_MINI</span>, <span style="font-family: Courier New,Courier,monospace">MIFARE_1K</span>, <span style="font-family: Courier New,Courier,monospace">MIFARE_4K</span>, <span style="font-family: Courier New,Courier,monospace">MIFARE_ULTRA</span>, <span style="font-family: Courier New,Courier,monospace">MIFARE_DESFIRE</span>, <span style="font-family: Courier New,Courier,monospace">ISO14443_B</span>, <span style="font-family: Courier New,Courier,monospace">ISO14443_4B</span>, <span style="font-family: Courier New,Courier,monospace">ISO14443_BPRIME</span>, <span style="font-family: Courier New,Courier,monospace">FELICA</span>, <span style="font-family: Courier New,Courier,monospace">JEWEL</span>, <span style="font-family: Courier New,Courier,monospace">ISO15693</span>, and <span style="font-family: Courier New,Courier,monospace">UNKNOWN_TARGET.</span></td>
    </tr>
   </tbody>
  </table>
  <p>The NFC forum defines the NFC data exchange format (NDEF) for encapsulating the data exchanged between 2 NFC-enabled devices or an NFC-enabled device and an NFC tag. An <a href="#ndef">NDEF message</a> can store data in various formats, such as text, Multipurpose Internet Mail Extension (MIME) type object, or ultra-short RagTime Document (RTD). The NFC tags use NDEF for exchanging messages. </p>
  
   <p>Before you start, remember to <a href="#prerequisites">prepare your application to use the NFC functionality</a>.</p>
  
  <p>The main features of the NFC API include:</p>
  <ul>
   <li>NFC device management <p>You can <a href="#Managing_NFC_Conn">manage NFC connectivity</a> by enabling or disabling the NFC service.</p> <p>To use NFC, retrieve the default NFC adapter using the <span style="font-family: Courier New,Courier,monospace">getDefaultAdapter()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCAdapter">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCAdapter">wearable</a> applications). You can enable and disable NFC using the <span style="font-family: Courier New,Courier,monospace">setPowered()</span> method.</p></li>
   <li>NFC tag and peer detection <p>To <a href="#Detecting_NFC_Tags">receive notifications when an NFC tag or peer device has been detected</a>, the <span style="font-family: Courier New,Courier,monospace">setTagListener()</span> and <span style="font-family: Courier New,Courier,monospace">setPeerListener()</span> methods of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface register event listeners, which trigger notifications when an NFC tag or peer device is detected, respectively. You can use the <span style="font-family: Courier New,Courier,monospace">NFCTagDetectCallback</span> (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCTagDetectCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCTagDetectCallback">wearable</a> applications) and <span style="font-family: Courier New,Courier,monospace">NFCPeerDetectCallback</span> (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCPeerDetectCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCPeerDetectCallback">wearable</a> applications) interfaces to define event handlers for receiving the notifications about attaching and detaching NFC tags and peers, respectively.</p></li>
   <li>NDEF message manipulation <p>You can <a href="#Handling_NDEF_Messages">handle NDEF messages</a> by first creating NDEF records, using the <span style="font-family: Courier New,Courier,monospace">NDEFRecord</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecord">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecord">wearable</a> applications), and then adding the records to an NDEF message using the <span style="font-family: Courier New,Courier,monospace">records</span> attribute of the <span style="font-family: Courier New,Courier,monospace">NDEFMessage</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFMessage">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFMessage">wearable</a> applications).</p></li>
   <li>NDEF data exchange <p>You can exchange NDEF data between <a href="#Exchanging_NDEF_Tags">tags</a> and <a href="#Exchanging_NDEF_Peers">peers</a>. To exchange data between tags, read from tags and write to tags using the <span style="font-family: Courier New,Courier,monospace">readNDEF()</span> and <span style="font-family: Courier New,Courier,monospace">writeNDEF()</span> methods.</p> <p>To exchange data between peers, the <span style="font-family: Courier New,Courier,monospace">setReceiveNDEFListener()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCPeer</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCPeer">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCPeer">wearable</a> applications) registers an event listener, which triggers an event when an NDEF message is received from a peer.</p> <p>You can use the <span style="font-family: Courier New,Courier,monospace">NDEFMessageReadCallback</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFMessageReadCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFMessageReadCallback">wearable</a> applications) to define event handlers for reading NDEF messages from tags and peer devices.</p>
   </li>
   <li>NFC card emulation <p>You can <a href="#Using_NFC_Card_Emulation">enable NFC card emulation and monitor the secure element transaction</a>  taking place using the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface. The secure element transaction is carried out by the device. The Tizen application can detect the transaction, but does not take part in it. Interpreting the transaction data requires knowledge about the data protocol the transaction uses. With the required knowledge, the application can detect whether the transaction was successful.</p></li>
   <li>NFC host-based card emulation (HCE) <p>You can <a href="#Using_NFC_Host_Based_Card_Emulation">handle HCE events and transactions</a> taking place using the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface. HCE is an on-device technology that permits a phone to perform card emulation on an NFC-enabled device without relying on access to a secure element. The transaction data is routed to the host application directly, instead of routing to a secure element. The Tizen application can detect the transaction and can take part in it.</p></li>
  </ul>
   <table class="note">
   <tbody>
    <tr>
     <th class="note">Note</th>
    </tr>
    <tr>
     <td class="note">If an application is on the background and uses the <span style="font-family: Courier New,Courier,monospace">writeNDEF()</span>, <span style="font-family: Courier New,Courier,monospace">transceive()</span>, or <span style="font-family: Courier New,Courier,monospace">sendNDEF()</span> method, an error callback is launched. These methods can only be used in the foreground.</td>
    </tr>
   </tbody>
  </table>
  <p>You can launch NFC applications based on the NDEF message content using the <a href="../app_management/app_controls_w.htm">application control</a> functionalities:</p>
  
  <ul>
  <li>NFC application can be launched by the receipt of an NDEF message or by the reading of an NFC tag.
  <p>If the application control with the <span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/wellknown</span> operation is defined in the <span style="font-family: Courier New,Courier,monospace">config.xml</span> file and an NFC-enabled device reads an NFC tag or receives an NDEF message whose first NDEF record has a record type (<span style="font-family: Courier New,Courier,monospace">tnf</span> value) set as <span style="font-family: Courier New,Courier,monospace">NFC_RECORD_TNF_WELL_KNOWN</span>, the NFC application is launched.</p></li>
  <li>NFC applications can be launched by the transaction of the card emulation functionality. NFC devices can communicate with point of sales (POS) terminals using the card emulation functionality to, for example, make a payment. 
  <p>If the application control with the <span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/transaction</span> or <span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/off_host_apdu_service</span> operation is defined in the <span style="font-family: Courier New,Courier,monospace">config.xml</span> file and a secure element transaction occurs, the NFC application is launched.</p></li>
  <li>NFC applications can be launched by the transaction of the HCE functionality. The NFC application can communicate with point of sales (POS) terminals using the HCE functionality to, for example, make a payment. 
  <p>If the application control with the <span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/host_apdu_service</span> operation is defined in the <span style="font-family: Courier New,Courier,monospace">config.xml</span> file and an HCE transaction occurs, the NFC application is launched.</p></li>
  <li>The system sends the <span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/card_emulation/default_changed</span> application control event when the default wallet is changed. For example, in <strong>Setting &gt; NFC &gt; Set Default Wallet App</strong>, if the default wallet is changed, an application control with this operation is sent to the selected application (wallet).</li>
  </ul>

<p>The following table lists the NFC operations, URI scheme and mime.</p>
  <table border="1">
   <caption>
     Table: NFC operations
   </caption>
   <tbody>
    <tr>
     <th>Operation</th>
     <th>URI scheme</th>
     <th>MIME</th>
    </tr>
    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/empty</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
    </tr>
    <tr>
     <td rowspan="2"><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/wellknown</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">&lt;scheme&gt;:&lt;host&gt;/&lt;path&gt;</span> <p>URL, for example:</p>
      <ul>
       <li><span style="font-family: Courier New,Courier,monospace">http</span></li>
       <li><span style="font-family: Courier New,Courier,monospace">http://tizen.org/</span></li>
       <li><span style="font-family: Courier New,Courier,monospace">http://tizen.org/about/devices</span></li>
       <li><span style="font-family: Courier New,Courier,monospace">http://tizen.org/about/*</span></li>
      </ul> <p>URN, for example:</p>
      <ul>
       <li><span style="font-family: Courier New,Courier,monospace">tel</span></li>
       <li><span style="font-family: Courier New,Courier,monospace">mailto</span></li>
       <li><span style="font-family: Courier New,Courier,monospace">mailto:tommy@tizen.org</span></li>
      </ul> </td>
     <td><span style="font-family: Courier New,Courier,monospace">U/&lt;protocol_code&gt;</span> <p>For example: <span style="font-family: Courier New,Courier,monospace">U/0x03, U/0x05, U/*</span></p> </td>
    </tr>
    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">&lt;type_string&gt;/*</span> <p>For example: <span style="font-family: Courier New,Courier,monospace">T/*, sp/*, */*</span></p> </td>
    </tr>
    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/mime</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">&lt;type_string&gt;/&lt;subtype_string&gt;</span> (case-insensitive) <p>For example: <span style="font-family: Courier New,Courier,monospace">text/x-vard, text/*, */*</span></p> </td>
    </tr>
    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/uri</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">&lt;uri&gt;</span> <p>For example: <span style="font-family: Courier New,Courier,monospace">http://tizen.org/about/devices</span></p> </td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
    </tr>
    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/external</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">&lt;scheme&gt;:&lt;string&gt;</span> (case-insensitive) <p>For example: <span style="font-family: Courier New,Courier,monospace">nfc:ext.tizen.org.ABC</span></p> </td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
    </tr>
    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/transaction</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">nfc://secure/&lt;SE name&gt;/aid/&lt;aid&gt;</span><p>For example:</p>
     <ul>
     <li><span style="font-family: Courier New,Courier,monospace">nfc://secure/SIM1/aid/123456789</span></li>
     <li><span style="font-family: Courier New,Courier,monospace">nfc://secure/SIM1/aid/1234*</span></li>
     <li><span style="font-family: Courier New,Courier,monospace">nfc://secure/SIM1/aid/*</span></li>
</ul>     </td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
    </tr>
	    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/card_emulation/host_apdu_service</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
    </tr>
    <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/card_emulation/off_host_apdu_service</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
    </tr>
        <tr>
     <td><span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/nfc/card_emulation/default_changed</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
     <td><span style="font-family: Courier New,Courier,monospace">NULL</span></td>
    </tr>
   </tbody>
  </table>
  <p>* The <span style="font-family: Courier New,Courier,monospace">&lt;protocol_code&gt;</span> and <span style="font-family: Courier New,Courier,monospace">&lt;scheme&gt;</span> must be in sync. See <a href="http://members.nfc-forum.org/apps/group_public/document.php?document_id=5078" target="_blank">NFCForum-TS-RTD_URI_1.0</a> and NFC RTD (Record Type Definition) documentation on the NFC forum.</p>
  
  <h2 id="ndef" name="ndef">NDEF Messages</h2>
  <p>Tizen provides the <span style="font-family: Courier New,Courier,monospace">NDEFMessage</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFMessage">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFMessage">wearable</a> applications) to define an NDEF message. An NDEF message is composed of multiple records.</p>
  <p>An NDEF record is created using the <span style="font-family: Courier New,Courier,monospace">NDEFRecord</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecord">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecord">wearable</a> applications) and is identified by record type, ID, and payload.</p>
  <p>The following figure shows the conceptual structure of an NDEF message.</p>
  <p class="figure">Figure: Structure of an NDEF message</p>
  <p align="center"><img alt="Structure of an NDEF message" src="../../images/nfc_record.png" /></p>
  <p>A record in an NDEF message can be created by using the following payload types:</p>
  <ul>
   <li>Text <p>The NDEF record content is created using text format.</p> <p>The <span style="font-family: Courier New,Courier,monospace">NDEFRecordText</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecordText">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecordText">wearable</a> applications) is used to create the text format payload using the <span style="font-family: Courier New,Courier,monospace">text</span>, <span style="font-family: Courier New,Courier,monospace">languageCode</span>, and <span style="font-family: Courier New,Courier,monospace">encoding</span> attributes.</p></li>
   <li>URI <p>The NDEF record content is created using a URI.</p> <p>The <span style="font-family: Courier New,Courier,monospace">NDEFRecordURI</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecordURI">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecordURI">wearable</a> applications) is used to create the URI type payload using the <span style="font-family: Courier New,Courier,monospace">uri</span> attribute.</p></li>
   <li>Media <p>The NDEF record content is created using a media format.</p> <p>The <span style="font-family: Courier New,Courier,monospace">NDEFRecordMedia</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecordMedia">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecordMedia">wearable</a> applications) is used to create the media format payload using the <span style="font-family: Courier New,Courier,monospace">mimeType</span> attribute.</p></li>
  </ul>
  
<h2 id="warm_up" name="warm_up">Warm-up</h2>
      <p>Become familiar with the NFC API basics by learning about:</p>
      <ul>
	   <li><a href="#prerequisites">Prerequisites</a> <p>Prepare your application to use the NFC functionality.</p></li>	  
       <li><a href="#Managing_NFC_Conn">Managing NFC Connectivity</a> <p>Retrieve the default NFC adapter and enable or disable NFC.</p></li>
       <li><a href="#Detecting_NFC_Tags">Detecting NFC Tags and Peer Devices</a> <p>Receive notifications when an NFC tag or peer device has been detected.</p></li>
	   <li>NDEF data
	   <ul>
       <li><a href="#Handling_NDEF_Messages">Handling NDEF Messages</a> <p>Create NDEF records and add them to an NDEF message.</p></li>
       <li><a href="#Exchanging_NDEF_Peers">Exchanging NDEF Data with Peers</a> <p>Read NDEF messages and exchange them with peer devices.</p></li>
       <li><a href="#Exchanging_NDEF_Tags">Exchanging NDEF Data with Tags</a> <p>Read NDEF messages and exchange them with tags.</p></li>
	   </ul></li>
       <li><a href="#Using_NFC_Card_Emulation">Using NFC Card Emulation</a> <p>Enable NFC card emulation and monitor the transaction taking place.</p></li>
	   <li><a href="#Using_NFC_Host_Based_Card_Emulation">Using NFC Host-based Card Emulation</a> <p>Handle NFC host-based card emulation events.</p></li>
      </ul>
      <h2 id="task" name="task">Task in Mobile Applications</h2>
      <p>In the <a href="task_contactsexchanger_w.htm">Contacts Exchanger</a> task, we will walk through how to exchange contacts between devices over an NFC connection.</p>
	  
	  <h2 id="prerequisites">Prerequisites</h2>
<p>To use the Application (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/application.html">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/application.html">wearable</a> applications) and NFC (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html">wearable</a> applications) APIs, the application has to request permission by adding the following privileges to the <span style="font-family: Courier New,Courier,monospace">config.xml</span> file:</p>

<pre class="prettyprint">
&lt;tizen:privilege name=&quot;http://tizen.org/privilege/application.launch&quot;/&gt;
&lt;tizen:privilege name=&quot;http://tizen.org/privilege/nfc.cardemulation&quot;/&gt;
&lt;tizen:privilege name=&quot;http://tizen.org/privilege/nfc.common&quot;/&gt;
&lt;tizen:privilege name=&quot;http://tizen.org/privilege/nfc.p2p&quot;/&gt;
&lt;tizen:privilege name=&quot;http://tizen.org/privilege/nfc.tag&quot;/&gt;
</pre>


  <h2 id="Managing_NFC_Conn" name="Managing_NFC_Conn">Managing NFC Connectivity</h2>
  
  <p>Learning how to enable or disable the NFC service is a basic NFC management skill:</p>
  <table class="note">
     <tbody>
      <tr>
       <th class="note">Note</th>
      </tr>
      <tr>
       <td class="note">The NFC API does not provide methods to directly enable or disable the NFC adapter of the device. When NFC is required, you must request the built-in Settings application to let the user enable or disable the NFC.</td>
      </tr>
     </tbody>
    </table>
  <ol>
   <li><p>To get the default NFC adapter, use the <span style="font-family: Courier New,Courier,monospace">getDefaultAdapter()</span> method and prepare an <span style="font-family: Courier New,Courier,monospace">ApplicationControl</span> object (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/application.html#ApplicationControl">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/application.html#ApplicationControl">wearable</a> applications) to request the NFC switching operation:</p>
   <pre class="prettyprint">var nfcSwitchAppControl = new tizen.ApplicationControl(&quot;http://tizen.org/appcontrol/operation/setting/nfc&quot;, null, null, null,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[new tizen.ApplicationControlData(&quot;type&quot;, &quot;nfc&quot;)]);
var adapter = tizen.nfc.getDefaultAdapter();</pre></li>
   <li>Define the event listener for the <span style="font-family: Courier New,Courier,monospace">launchAppControl()</span> method:
<pre class="prettyprint">function launchSuccess()
{
&nbsp;&nbsp;&nbsp;console.log(&quot;NFC Settings application has successfully launched.&quot;);
}
function launchError(error) 
{
&nbsp;&nbsp;&nbsp;alert(&quot;An error occurred: &quot; + error.name + &quot;. Please enable NFC through the Settings application.&quot;);
}</pre></li>
<li>Define the event handler for an application control, which implements the <span style="font-family: Courier New,Courier,monospace">ApplicationControlDataArrayReplyCallback</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/application.html#ApplicationControlDataArrayReplyCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/application.html#ApplicationControlDataArrayReplyCallback">wearable</a> applications):
<pre class="prettyprint">var serviceReply =
{
&nbsp;&nbsp;&nbsp;/* onsuccess is called when the launched application reports success */
&nbsp;&nbsp;&nbsp;onsuccess: function(data)
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (adapter.powered)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;NFC is successfully turned on.&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;/* onfailure is called when the launched application reports failure of the requested operation */
&nbsp;&nbsp;&nbsp;onfailure: function() 
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(&quot;NFC Settings application reported failure.&quot;);
&nbsp;&nbsp;&nbsp;}
}</pre></li>
<li> If necessary, request launching the NFC Settings with <span style="font-family: Courier New,Courier,monospace">nfcSwitchAppControl</span> as parameter:
<pre class="prettyprint">if (adapter.powered)
{
&nbsp;&nbsp;&nbsp;console.log(&quot;NFC is already enabled&quot;);
}
else
{
&nbsp;&nbsp;&nbsp;console.log(&quot;Try to launch the NFC Settings application.&quot;);
&nbsp;&nbsp;&nbsp;tizen.application.launchAppControl(nfcSwitchAppControl, null, launchSuccess, launchError, serviceReply);
}</pre></li>
  </ol>
  
  <h2 id="Detecting_NFC_Tags" name="Detecting_NFC_Tags">Detecting NFC Tags and Peer Devices</h2>
  
  <p>Learning how to detect NFC tags and peer devices is a basic NFC management skill:</p>
  <ol>
   <li><p>To get the default NFC adapter, use the <span style="font-family: Courier New,Courier,monospace">getDefaultAdapter()</span> method:</p> <pre class="prettyprint">var nfcAdapter = tizen.nfc.getDefaultAdapter();</pre></li>
   <li><p>Define the event handlers for NFC tag detection using the <span style="font-family: Courier New,Courier,monospace">NFCTagDetectCallback</span> listener interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCTagDetectCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCTagDetectCallback">wearable</a> applications):</p> <pre class="prettyprint">var setTagDetect =
{
&nbsp;&nbsp;&nbsp;/* When an NFC tag is detected */
&nbsp;&nbsp;&nbsp;onattach: function(nfcTag)
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;NFC Tag detected. Its type is: &quot; + nfcTag.type);
&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;/* When an NFC tag becomes unavailable */
&nbsp;&nbsp;&nbsp;ondetach: function()
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;NFC Tag unavailable&quot;);
&nbsp;&nbsp;&nbsp;}
}</pre></li>
   <li><p>Register the listener to use the defined event handlers.</p> <p>You can limit the listener to detect only specific NFC tag types by defining the tag types as the second parameter of the <span style="font-family: Courier New,Courier,monospace;">setTagListener()</span> method. In the following example, only MIFARE tags are detected.</p> <pre class="prettyprint">
/* Defines the tag types to be detected */
var tagFilter = [&quot;MIFARE_MINI&quot;, &quot;MIFARE_1K&quot;, &quot;MIFARE_4K&quot;, &quot;MIFARE_ULTRA&quot;, &quot;MIFARE_DESFIRE&quot;];

/* Registers the event listener */
nfcAdapter.setTagListener(setTagDetect, tagFilter);</pre> </li>
   <li><p>To stop the tag detection, use the <span style="font-family: Courier New,Courier,monospace;">unsetTagListener()</span> method:</p> <pre class="prettyprint">
nfcAdapter.unsetTagListener();</pre> </li>
  </ol>
  <p>NFC peers are detected similarly as NFC tags, except that the <span style="font-family: Courier New,Courier,monospace;">setPeerListener()</span> method is used to register the <span style="font-family: Courier New,Courier,monospace;">NFCPeerDetectCallback</span> listener interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCPeerDetectCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCPeerDetectCallback">wearable</a> applications), and the <span style="font-family: Courier New,Courier,monospace;">unsetPeerListener()</span> method is used to stop the peer detection.</p>
    
  <h2 id="Handling_NDEF_Messages" name="Handling_NDEF_Messages">Handling NDEF Messages</h2>
  
  
  <p>Learning how to create NDEF messages is a basic NFC management skill:</p>
  <ol>
   <li><p>To create an NDEF URI record, create an <span style="font-family: Courier New,Courier,monospace;">NDEFRecordURI</span> interface instance (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecordURI">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecordURI">wearable</a> applications) and specify the URI parameter.</p> <p>Additionally, you can create instances of the <span style="font-family: Courier New,Courier,monospace;">NDEFRecord</span> (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecord">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecord">wearable</a> applications), <span style="font-family: Courier New,Courier,monospace;">NDEFRecordText</span> (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecordText">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecordText">wearable</a> applications), or <span style="font-family: Courier New,Courier,monospace;">NDEFRecordMedia</span> (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFRecordMedia">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFRecordMedia">wearable</a> applications) interfaces based on the record type to be created.</p> <pre class="prettyprint">var newRecord = new tizen.NDEFRecordURI(&quot;https://www.tizen.org/&quot;);</pre></li>
   <li><p>Create an <span style="font-family: Courier New,Courier,monospace">NDEFMessage</span> interface instance (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFMessage">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFMessage">wearable</a> applications):</p> <pre class="prettyprint">
var newMessage = new tizen.NDEFMessage(); </pre></li>
   <li><p>To add an NDEF record to an NDEF message, use the <span style="font-family: Courier New,Courier,monospace">records</span> attribute of the <span style="font-family: Courier New,Courier,monospace">NDEFMessage</span> interface:</p> <pre class="prettyprint">
newMessage.records[0] = newRecord;</pre></li>
  </ol>
   
  <h2 id="Exchanging_NDEF_Peers" name="Exchanging_NDEF_Peers">Exchanging NDEF Data with Peers</h2> 
  
  <p>Learning how to exchange NDEF messages is a basic NFC management skill:</p>
  <ol>
   <li><p>To receive NDEF messages from a peer device, use the <span style="font-family: Courier New,Courier,monospace;">setReceiveNDEFListener()</span> method of the <span style="font-family: Courier New,Courier,monospace;">NFCPeer</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCPeer">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCPeer">wearable</a> applications).</p><p>The <span style="font-family: Courier New,Courier,monospace;">setReceiveNDEFListener()</span> method registers the <span style="font-family: Courier New,Courier,monospace;">NDEFMessageReadCallback</span> listener interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFMessageReadCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFMessageReadCallback">wearable</a> applications), which is invoked when an NDEF message from a peer device is read.</p> <pre class="prettyprint">
/* NDEFMessageReadCallback listener */
function readMessage(message)
{
&nbsp;&nbsp;&nbsp;console.log(&quot;Record Count is &quot; + message.recordCount);
}

/* Set a listener to receive an NDEF message */
Peer.setReceiveNDEFListener(readMessage);</pre></li>
   <li><p>To send an NDEF message to an NFC peer, use the <span style="font-family: Courier New,Courier,monospace;">sendNDEF()</span> method:</p> <pre class="prettyprint">
var newMessage = new tizen.NDEFMessage();

Peer.sendNDEF(newMessage);</pre></li>
  </ol>
   
  <h2 id="Exchanging_NDEF_Tags" name="Exchanging_NDEF_Tags">Exchanging NDEF Data with Tags</h2>
			
  <p>Learning how to exchange NDEF data with tags is a basic NFC management skill:</p>
  <ol>
   <li><p>To read data from an NFC tag, use the <span style="font-family: Courier New,Courier,monospace;">readNDEF()</span> method of the <span style="font-family: Courier New,Courier,monospace;">NFCTag</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCTag">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCTag">wearable</a> applications).</p> <p>The <span style="font-family: Courier New,Courier,monospace;">readNDEF()</span> method registers the <span style="font-family: Courier New,Courier,monospace;">NDEFMessageReadCallback</span> listener interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NDEFMessageReadCallback">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NDEFMessageReadCallback">wearable</a> applications), which is invoked when an NDEF message is read.</p> <pre class="prettyprint">
/* NDEFMessageReadCallback listener */
function readMessage(message)
{
&nbsp;&nbsp;&nbsp;console.log(&quot;Record Count is &quot; + message.recordCount);
}

/* Check whether the NFC tag supports NDEF format */
if (Tag.isSupportedNDEF)
{
&nbsp;&nbsp;&nbsp;/* Read NDEF data */
&nbsp;&nbsp;&nbsp;Tag.readNDEF(readMessage);
}</pre></li>
   <li><p>To write data on an NFC tag, use the <span style="font-family: Courier New,Courier,monospace;">writeNDEF()</span> method:</p> <pre class="prettyprint">
var newMessage = new tizen.NDEFMessage();
function writeCallback()
{
&nbsp;&nbsp;&nbsp;console.log(&quot;Success!&quot;);
}
Tag.writeNDEF(newMessage, writeCallback);</pre> <p>You can use the <span style="font-family: Courier New,Courier,monospace;">transceive()</span> method to transfer raw data as a byte array to an NFC tag without knowing the underlying details of the tag.</p></li>
  </ol>
   
                <h2 id="Using_NFC_Card_Emulation" name="Using_NFC_Card_Emulation">Using NFC Card Emulation</h2>

<p>Learning how to enable or disable the NFC card emulation and detect Secure Element transactions is a basic NFC management skill:</p>
<ol>
<li>Declare the required variables and obtain the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> object (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCAdapter">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCAdapter">wearable</a> applications) using the <span style="font-family: Courier New,Courier,monospace">getDefaultAdapter()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCManager</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCManager">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCManager">wearable</a> applications):
<pre class="prettyprint">
var adapter = tizen.nfc.getDefaultAdapter();
var modeListenerId = 0, aseListenerId = 0, transListenerId = 0;
</pre></li>
<li>Use the <span style="font-family: Courier New,Courier,monospace">addCardEmulationModeChangeListener()</span>  method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface to register a listener to monitor the current card emulation mode:
<pre class="prettyprint">
modeListenerId = adapter.addCardEmulationModeChangeListener(function(mode)
{
&nbsp;&nbsp;&nbsp;if (mode === &quot;ALWAYS_ON&quot;)
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;We are ready to go now&quot;);
&nbsp;&nbsp;&nbsp;}
});
</pre></li>
<li>To enable NFC card emulation, change the value of the <span style="font-family: Courier New,Courier,monospace">cardEmulationMode</span>  attribute:
<pre class="prettyprint">
adapter.cardEmulationMode = &quot;ALWAYS_ON&quot;;
</pre></li>
 <li>To be notified when the type of an active NFC secure element changes, use the <span style="font-family: Courier New,Courier,monospace">addActiveSecureElementChangeListener()</span>  method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface:
<pre class="prettyprint">
aseListenerId = adapter.addActiveSecureElementChangeListener(function(seType)
{
&nbsp;&nbsp;&nbsp;console.log(&quot;Active secure element is &quot; + seType);
});
</pre></li>
<li>To be notified when a NFC secure element transaction data is exchanged, use the <span style="font-family: Courier New,Courier,monospace">addTransactionEventListener()</span>  method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface:
<pre class="prettyprint">
function onDetected(appletId, data)
{
&nbsp;&nbsp;&nbsp;console.log(&quot;NFC secure element transaction detected. Application: &quot; + appletId + &quot;. Protocol data: &quot; + data);
});
transListenerId = adapter.addTransactionEventListener(&quot;UICC&quot;, onDetected);
</pre></li>
<li>Remove the registered listeners when they are no longer necessary and disable NFC card emulation:
<pre class="prettyprint">
adapter.removeActiveSecureElementChangeListener(aseListenerId);
adapter.removeTransactionEventListener(transListenerId);
adapter.removeCardEmulationModeChangeListener(modeListenerId);
adapter.cardEmulationMode = &quot;OFF&quot;;
</pre></li>
</ol>
  
<h2 id="Using_NFC_Host_Based_Card_Emulation" name="Using_NFC_Host_Based_Card_Emulation">Using NFC Host-based Card Emulation</h2>

<p>Learning how to detect NFC HCE (host-based card emulation) events and manage AID (Application ID) is a basic NFC management skill:</p>
<ol>
<li><p>Specify an <span style="font-family: Courier New,Courier,monospace;">AID</span> value for receiving HCE transaction events:</p>
<ol type="a">
<li>
<p>To tell the platform which AID groups are requested by the application, a metadata element must be included in the <span style="font-family: Courier New,Courier,monospace;">config.xml</span> file:</p>
<pre class="prettyprint">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;widget xmlns:tizen=&quot;http://tizen.org/ns/wdigets&quot; xmlns=&quot;http://www.w3.org/ns/widgets&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id=&quot;http://yourdomain/basicapp&quot; version=&quot;1.0.0&quot; viewmodes=&quot;maximized&quot; &gt;
&nbsp;&nbsp;&nbsp;&lt;profile name=&quot;wearable&quot; /&gt;
&nbsp;&nbsp;&nbsp;&lt;tizen:application id=&quot;ZmAk4fxZWY.basicapp&quot; package=&quot;ZmAk4fxZWY&quot; required_version=&quot;2.3.1&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;icon src=icon.png&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;name&gt;basicapp&lt;/name&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;metadata key=&quot;http://tizen.org/metadata/nfc_cardemulation&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value=&quot;/res/wgt/wallet.xml&quot;/&gt;
&lt;/widget&gt;
</pre>
<ul><li>The <span style="font-family: Courier New,Courier,monospace;">metadata</span> element must contain the <span style="font-family: Courier New,Courier,monospace;">key</span> and <span style="font-family: Courier New,Courier,monospace;">value</span> attributes.</li>
<li>The <span style="font-family: Courier New,Courier,monospace;">key</span> attribute must be <span style="font-family: Courier New,Courier,monospace;">http://tizen.org/metadata/nfc_cardemulation</span>.</li>
<li>The <span style="font-family: Courier New,Courier,monospace;">value</span> attribute must contain the AID XML file path.
<p>The <span style="font-family: Courier New,Courier,monospace;">value</span> attribute is a relative path starting from the application root path.</p></li>
</ul>
</li>
<li><p>The metadata element points to an AID XML file. The following is an example of the file with an AID declaration:</p>
<pre class="prettyprint">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;application name=&quot;ZmAk4fxZWY.basicapp&quot;&gt;
&nbsp;&nbsp;&nbsp;&lt;wallet&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;aid-group category=&quot;payment&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;aid aid=&quot;325041592E5359532E4444463031&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;se_type=&quot;hce&quot; unlock=&quot;false&quot; power=&quot;sleep&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/aid-group&gt;
&nbsp;&nbsp;&nbsp;&lt;/wallet&gt;
&lt;/application&gt;
</pre>
<ul><li>The <span style="font-family: Courier New,Courier,monospace;">application</span> element must contain a <span style="font-family: Courier New,Courier,monospace;">name</span> attribute with an application name.</li>
<li>The <span style="font-family: Courier New,Courier,monospace;">application</span> element must contain one or more <span style="font-family: Courier New,Courier,monospace;">wallet</span> element, each of which must contain one or more <span style="font-family: Courier New,Courier,monospace;">aid-group</span> element. </li>
<li>The <span style="font-family: Courier New,Courier,monospace;">aid-group</span> element is required to contain a <span style="font-family: Courier New,Courier,monospace;">category</span> attribute with the <span style="font-family: Courier New,Courier,monospace;">payment</span> or <span style="font-family: Courier New,Courier,monospace;">other</span> value.</li>
<li>Each <span style="font-family: Courier New,Courier,monospace;">aid-group</span> element must contain one or more <span style="font-family: Courier New,Courier,monospace;">aid</span> element, each of which contains a single AID. The <span style="font-family: Courier New,Courier,monospace;">aid-group</span> can have as many <span style="font-family: Courier New,Courier,monospace;">aid</span> elements as you want.</li>
<li>The <span style="font-family: Courier New,Courier,monospace;">aid</span> element must contain the <span style="font-family: Courier New,Courier,monospace;">aid</span>, <span style="font-family: Courier New,Courier,monospace;">se_type</span>, <span style="font-family: Courier New,Courier,monospace;">unlock</span>, and <span style="font-family: Courier New,Courier,monospace;">power</span> attributes.</li>
<li>The <span style="font-family: Courier New,Courier,monospace;">se_type</span> attribute must contain <span style="font-family: Courier New,Courier,monospace;">hce</span>, <span style="font-family: Courier New,Courier,monospace;">ese</span>, or <span style="font-family: Courier New,Courier,monospace;">uicc</span>. The <span style="font-family: Courier New,Courier,monospace;">se_type</span> value can be added later.</li>
<li>The <span style="font-family: Courier New,Courier,monospace;">unlock</span> attribute must contain one of the following:
<ul><li><span style="font-family: Courier New,Courier,monospace;">true</span>: The card cannot work when the device is locked.</li>
<li><span style="font-family: Courier New,Courier,monospace;">false</span>: The card can work when the device is locked.</li></ul></li>
<li>The <span style="font-family: Courier New,Courier,monospace;">power</span> must contain one of the following:
<ul><li><span style="font-family: Courier New,Courier,monospace;">on</span>: The card can work when the device is on.</li>
<li><span style="font-family: Courier New,Courier,monospace;">off</span>: The card can work when the device is off.</li>
<li><span style="font-family: Courier New,Courier,monospace;">sleep</span>: The card can work when the device is in the sleep mode.</li></ul></li>
</ul></li></ol></li>
<li><p>Declare the required variables and obtain the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> object (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCAdapter">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCAdapter">wearable</a> applications) using the <span style="font-family: Courier New,Courier,monospace">getDefaultAdapter()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCManager</span> interface (in <a href="../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/nfc.html#NFCManager">mobile</a> and <a href="../../../../org.tizen.web.apireference/html/device_api/wearable/tizen/nfc.html#NFCManager">wearable</a> applications).</p>
<p>To enable NFC card emulation, change the value of the <span style="font-family: Courier New,Courier,monospace">cardEmulationMode</span> attribute.</p>
<pre class="prettyprint">
var hceListenerId = 0;
var adapter = tizen.nfc.getDefaultAdapter();

adapter.cardEmulationMode = &quot;ALWAYS_ON&quot;;
</pre></li>
<li>
<p>To detect the HCE event, use the <span style="font-family: Courier New,Courier,monospace">addHCEEventListener()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface to register a listener.</p>
<p>Use the <span style="font-family: Courier New,Courier,monospace">sendHostAPDUResponse()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface to send a host APDU response to a contactless front-end. (APDU - Application Protocol Data Unit - is defined in the ISO/IEC 7816-4 specification.)</p>
<pre class="prettyprint">
var successCB = function()
{
&nbsp;&nbsp;&nbsp;console.log(&quot;Sending APDU response was successful.&quot;);
};

var errorCB = function()
{
&nbsp;&nbsp;&nbsp;console.log(&quot;Sending APDU response failed.&quot;);
};

hceListenerId = adapter.addHCEEventListener(function(event_data)
{
&nbsp;&nbsp;&nbsp;if (event_data.eventType == &quot;ACTIVATED&quot;)
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;HCE activated&quot;);
&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;else if (event_data.eventType == &quot;DEACTIVATED&quot;)
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;HCE deactivated&quot;);
&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;else if (event_data.eventType == &quot;APDU_RECEIVED&quot;)
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;APDU received&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var apdu_response = [0x00,0xA4,0x04,0x00,0x04,0x11,0x12, 0x13, 0x14];
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;adapter.sendHostAPDUResponse(apdu_response, successCB, errorCB);
&nbsp;&nbsp;&nbsp;}
});
</pre></li> 
<li>To register an AID for a specific category and secure element type, use the <span style="font-family: Courier New,Courier,monospace">registerAID()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface:
<pre class="prettyprint">
try 
{
&nbsp;&nbsp;&nbsp;var aid = &quot;ABC0012345&quot;;
&nbsp;&nbsp;&nbsp;adapter.registerAID(&quot;HCE&quot;, aid, &quot;PAYMENT&quot;)
} 
catch (err) 
{
&nbsp;&nbsp;&nbsp;console.log(err.name + &quot;:&quot; + err.message);
}
</pre></li>
 <li>To retrieve the registered AIDs for a specific category and secure element type, use the <span style="font-family: Courier New,Courier,monospace">getAIDsForCategory()</span> method of the <span style="font-family: Courier New,Courier,monospace">NFCAdapter</span> interface:
<pre class="prettyprint">
try 
{
&nbsp;&nbsp;&nbsp;var successCallback = function(aid_datas) 
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (var i = 0; i &lt; aid_datas.length; i++)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;SE Type is &quot; + aid_datas[i].type);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;AID is &quot; + aid_datas[i].aid);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;readonly: &quot; + aid_datas[i].readOnly);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;};

&nbsp;&nbsp;&nbsp;var errorCallback = function(error) 
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&quot;getAIDsForCategory failed.&quot;);
&nbsp;&nbsp;&nbsp;};

&nbsp;&nbsp;&nbsp;adapter.getAIDsForCategory(&quot;HCE&quot;, &quot;PAYMENT&quot;, successCallback, errorCallback);
} 
catch (err) 
{
&nbsp;&nbsp;&nbsp;console.log(err.name + &quot;:&quot; + err.message);
}
</pre></li>
<li>Remove the registered listeners when they are no longer necessary, and disable NFC card emulation:
<pre class="prettyprint">
adapter.removeHCEEventListener(hceListenerId);
adapter.cardEmulationMode = &quot;OFF&quot;;
</pre></li>
</ol>

<script type="text/javascript" src="../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>