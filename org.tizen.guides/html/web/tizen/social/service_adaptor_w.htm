<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <link rel="stylesheet" type="text/css" href="../../../css/styles.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/snippet.css" />
    <script type="text/javascript" src="../../../scripts/snippet.js"></script>
    <script type="text/javascript" src="../../../scripts/jquery.util.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../../scripts/common.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../../scripts/core.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../../scripts/search.js" charset="utf-8"></script>
    <title>Service Adaptor</title>
</head>

<body onload="prettyPrint()" style="overflow: auto;">

<div id="toc-navigation">
    <div id="profile">
        <!--<p><img alt="Mobile native" src="../../images/mn_icon.png"/> <img alt="Wearable native" src="../../images/wn_icon.png"/></p>-->
        <p><img alt="Mobile Web" src="../../../images/mw_icon_optional.png"/></p>
    </div>

    <div id="toc_border"><div id="toc">
        <p class="toc-title">Content</p>
        <ul class="toc">
            <li><a href="#adaptors">Available Adaptors</a></li>
			<li><a href="#start_plugin">Starting a Plugin</a></li>
        </ul>
        <p class="toc-title">Related Info</p>
        <ul class="toc">
            <!--<li><a href="../../../../../org.tizen.tutorials/html/native/social/service_adaptor_tutorial_n.htm">Service Adaptor Tutorial</a></li>-->
            <li><a href="../../../../../org.tizen.web.apireference/html/device_api/mobile/tizen/serviceadaptor.html">Service Adaptor API for Mobile Web</a></li>            
        </ul>
    </div></div>
</div>

<div id="container"><div id="contents"><div class="content">
<h1>Service Adaptor</h1>

<p>You can manage adaptors, which function as agents between the Service Adaptor Client and the related plugins, to take advantage of various services. For example, the Auth and Storage adaptors allow you to access the Auth and Service Plugins to use services, such as Amazon, Box, Dropbox, Gogledrive, Onedrive, and Sugarsync.</p>

<p class="figure">Figure: Service adaptor structure</p>
<p style="text-align:center;"><img alt="Service adaptor structure" src="../../../images/service_adaptor_structure.png"/></p>

<p>The main feature of the Service Adaptor API is to connect adaptors to and disconnect them from the Service Adaptor Client though D-Bus. The Service adaptor uses 2 path types:</p>
    <ul>
        <li><b>Logical path</b>
<p>The path of the root file system. It starts from the root path (&quot;/&quot;), and you can use the path like in Linux (for example, &quot;/folder1/image1.jpg&quot;).</p>
        </li>
        <li><b>Physical path</b>
<p>A specific URI used for the cloud server. Some clouds use a logical path, but others use a specific key or URL (for example, &quot;/&quot; is &quot;ZmNhMWY2MTZlY2M1NDg4OGJmZDY4O&quot; and &quot;/folder1&quot; is &quot;2JI32UNJDWQEQWQWEADSSAD&quot;).</p>
        </li>
    </ul>

<h2 id="adaptors" name="adaptors">Available Adaptors</h2>	
	
<p>The following adaptors are provided:</p>

<ul>
    <li>Auth adaptor
<p>This adaptor manages authentication plugins. It allows you to:</p>
    <ul>
        <li>Get the Auth Plugin list.</li>
        <li>Set the Plugin.</li>
        <li>Request the Channel Auth, such as the service name (&quot;com.serviceadaptor.message&quot;), app ID, service ID (0: contact, 1: free message), and mobile station identification number (IMSI).</li>
    </ul>
</li>
    <li>Storage adaptor
<p>This adaptor handles files transfers to and from a cloud. It allows you to:</p>
    <ul>
        <li>Download a server or thumbnail file and write it to a local file.</li>
        <li>Upload a local file to a server path.</li>
        <li>Request the file status.</li>
        <li>Cancel, pause, and resume a file transfer.</li>
    </ul>
	</li> 
	<li>Contact adaptor
<p>This adaptor manages contact information in the Contact server, including the contact profiles and service registration information. It allows you to:</p>
    <ul>
        <li>Reset contact information in the Contact server and upload native contact information of the device to the server.</li>
        <li>Synchronize native contact information of the device with the Contact server according to the <span style="font-family: Courier New,Courier,monospace">[type]</span> field of each contact.</li>
        <li>Get contact profiles and service registration information.</li>
        <li>Set and update device profile in the server.</li>
        <li>Upload and delete profile image meta in the File server and set the my profile image to the Profile server.</li>
        <li>Set and get my profile privacy level</li>
        <li>Set my presence ON/OFF information to the Presence server.</li>
    </ul>
</li>
    <li>Discovery adaptor
	<p>This adaptor is a future development. Not in use yet.</p></li>
    <li>Message adaptor
<p>This adaptor manages chatting and messaging. It allows you to:</p>
    <ul>
        <li>Create a chatroom, and invite people to (or end) a chat.</li>
        <li>Get all unread messages.</li>
        <li>Read or unseal a message.</li>
        <li>Forward online or unread messages.</li>
        <li>Save the call log.</li>
        <li>Get the chat ID based on the phone number.</li>
    </ul>
	</li>
    <li>Push adaptor
<p>This adaptor receives push notifications from a push service.</p></li>
    <li>Shop adaptor
<p>This adaptor allows you to:</p>
    <ul>
        <li>Get a list of items.</li>
        <li>Get item information for download.</li>
        <li>Download an item.</li>
        <li>Get the item panel URL.</li>
    </ul>
	</li>
</ul>


<h2 id="start_plugin" name="start_plugin">Starting a Plugin</h2>

<p>To start a plugin, use the following process:</p>

<ol><li>Create a Service adaptor with the <span style="font-family: Courier New,Courier,monospace">service_adaptor_create()</span> function.</li>
<li>With a valid Service adaptor handler, iterate through all installed plugins with the <span style="font-family: Courier New,Courier,monospace">service_adaptor_foreach_plugin()</span> function.</li>
<li>Inside the callback (invoked for each plugin), get the <span style="font-family: Courier New,Courier,monospace">plugin_uri</span> value, which is passed to the <span style="font-family: Courier New,Courier,monospace">service_adaptor_create_plugin()</span> function.</li>
<li>Request a start initialization for the service plugin with the <span style="font-family: Courier New,Courier,monospace">service_plugin_start()</span> function.</li></ol>

<p>The following example starts all installed Auth and Storage plugins appending each <span style="font-family: Courier New,Courier,monospace">plugin_uri</span> to the <span style="font-family: Courier New,Courier,monospace">list</span> object:</p>
<pre class="prettyprint">
bool _plugin_iterator_cb(char *plugin_uri, int service_mask, void *user_data);

service_adaptor_h service_adaptor = NULL;
ret = service_adaptor_create(&amp;service_adaptor);

Evas_Object *list;
ret = service_adaptor_foreach_plugin(service_adaptor, _plugin_iterator_cb, (void *)list);

bool _plugin_iterator_cb(char *plugin_uri, int service_mask, void *user_data)
{
&nbsp;&nbsp;&nbsp;Evas_Object *list = (Evas_Object *)user_data;

&nbsp;&nbsp;&nbsp;if (!plugin_uri || !list)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;

&nbsp;&nbsp;&nbsp;if ((service_mask &amp; SERVICE_PLUGIN_SERVICE_AUTH) &amp;&amp; (service_mask &amp; SERVICE_PLUGIN_SERVICE_STORAGE))
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elm_list_item_append(list, plugin_uri, NULL, NULL, _show_plugin_view, plugin_uri);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service_plugin_h plugin = NULL;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service_adaptor_create_plugin(service_adaptor, plugin_uri, &amp;plugin);

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Hide this using config file or user input, because it is security information
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service_plugin_add_property(plugin, SERVICE_PLUGIN_PROPERTY_APP_KEY, &quot;enasvv4l8hdbmhn&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service_plugin_add_property(plugin, SERVICE_PLUGIN_PROPERTY_APP_SECRET, &quot;uqhl4pp8mo7hmgn&quot;);
		
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service_plugin_start(plugin, (SERVICE_PLUGIN_SERVICE_AUTH | SERVICE_PLUGIN_SERVICE_STORAGE));
&nbsp;&nbsp;&nbsp;}

&nbsp;&nbsp;&nbsp;return true;
}
</pre>

<script type="text/javascript" src="../../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../../../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>
