<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" type="text/css" href="../../css/styles.css" />
	<link rel="stylesheet" type="text/css" href="../../css/snippet.css" />
	<script type="text/javascript" src="../../scripts/snippet.js"></script>
	<script type="text/javascript" src="../../scripts/jquery.util.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/core.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/search.js" charset="utf-8"></script>
	<title>Contextual Trigger</title>
</head>
<body onload="prettyPrint()" style="overflow: auto;">

<div id="toc-navigation">
	<div id="profile">
		<p><img alt="Mobile native" src="../../images/mn_icon.png"/></p>
	</div>

	<div id="toc_border"><div id="toc">
		<p class="toc-title">Content</p>
		<ul class="toc">
			<li><a href="#event_and_condition">Event and Conditions</a></li>
			<li><a href="#action">Actions</a></li>
		</ul>
		<p class="toc-title">Related Info</p>
		<ul class="toc">
			<li><a href="../../../../org.tizen.tutorials/html/native/context/trigger_tutorial_n.htm">Contextual Trigger Tutorial</a></li>
			<li><a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__CONTEXT__TRIGGER__MODULE.html">Contextual Trigger API for Mobile Native</a></li>
		</ul>
	</div></div>
</div>

<div id="container"><div id="contents"><div class="content">

<h1>Contextual Trigger</h1>

<p>Tizen enables you to define rules as a combination of a contextual event, conditions, and an action. When the rule is enabled, the system starts to monitor the device status or user activities corresponding to the event defined in the rule. When the event is detected, the conditions are evaluated, and if the conditions are met, the action is triggered.</p>

<table class="note"> 
<tbody> 
    <tr> 
     <th class="note">Note</th> 
    </tr> 
    <tr> 
     <td class="note">This feature is supported in mobile applications only.</td> 
    </tr> 
   </tbody> 
  </table>

<p>The action can be an application launching request using an <a href="../app/application_n.htm#app_controls">App Control</a>, or a <a href="../app/notification_n.htm">notification posting</a>. For example, every day at 10:00 PM, if the battery level is low, the application can post a notification to remind the user to charge the battery.</p>

<p>The main features of the Contextual Trigger API include:</p>

<ul><li>Life-cycle management
<p>Once a rule is composed and registered successfully into the system, a unique rule ID is assigned to it. You can use the rule ID to enable, disable, or permanently remove the rule.</p>

<p class="figure">Figure: Rule states</p>
<p align="center"><img alt="Rule States" src="../../images/context_trigger_rule_states.png" /></p>

<table class="note">
	<tbody>
		<tr>
			<th class="note">Note</th>
		</tr>
		<tr>
			<td class="note">
				A rule can be enabled, disabled, or removed only by the owner application that composed and registered the rule.
			</td>
		</tr>
	</tbody>
</table></li>
<li>Rule retrieval
<p>The application can retrieve a list of enabled and disabled rule IDs owned by the application.</p>
</li></ul>

<p>If you only need to monitor a fundamental system event, such as the USB connection status, to launch a service application, and no condition is required, use <a href="../app/application_n.htm#callback">event callbacks</a>. In these cases, using the event system instead of the contextual trigger is more efficient, as the contextual trigger runs a rule engine to manage state changes of multiple event and condition items simultaneously.</p>

<p>A rule always consist of 3 main components:</p>

<ul><li>Event
<p>An event literally denotes a contextual event that can be recognized by the device, or a change in a certain contextual state of the device or the user. For example, connections to peripherals, changes in settings, location changes, or specific times can be used as events. Note that only 1 event can be defined in a rule, as it is used as the initiator of the verification of the conditions. If the system detects the occurrence of the designated event, it starts to verify the conditions.</p></li>
<li>Condition
<p>A condition denotes a contextual state or fact that can be recognized by the device. For example, the current device status or the historical pattern of the device usage can be used as conditions. In a rule, the application can define 1 condition, multiple conditions, or even no condition. If you define multiple conditions in a rule, the application can choose the way of combining the conditions using logical conjunctions or disjunctions. In case of the logical conjunction, the rule is true only if all the conditions are met. Otherwise, the rule can be true if at least 1 condition is met. If no condition is given, the rule is satisfied instantly when the corresponding event occurs.</p></li>
<li>Action
<p>An action is triggered when the rule is satisfied. Each rule must basically contain 1 action only. However, because the action itself can be defined as an <a href="../app/application_n.htm#app_controls">App Control</a>, if necessary, you can implement an application that executes a series of tasks to create a complex context-aware service.</p></li></ul>

<p>The following figure illustrates the rule components and their relations.
</p>
<p class="figure">Figure: Rule components</p>
<p align="center"><img alt="Rule components" src="../../images/context_trigger_rule_components.png" width="350"/></p>


<h2 id="event_and_condition" name="event_and_condition">Event and Conditions</h2>

<p>In a rule, the combination of an event and conditions formulates the logical statement that decides to execute the action of the rule or leave it undone. The event and the conditions are defined in various kinds of contextual information, which can be recognized on the device:</p>
<ul><li>An event represents a contextual state change or a contextual event literally, such as &quot;headphone is plugged&quot;, &quot;the battery level has dropped to low&quot;, or &quot;the user enters his home&quot;.</li>
<li>A condition represents a current contextual state or a device or user profile inferred through the usage history, for example, &quot;the current battery level is low&quot;, &quot;Wi-Fi connection is active&quot;, or &quot;(when receiving an incoming call) the number is the most frequent address in his call logs&quot;.</li></ul>

<p>Defining an event or a condition can involve attribute comparisons and input option parameter settings. The following example illustrates how to formulate a simple rule of &quot;at 10 PM, if the battery is not charging&quot;:</p>

<ol><li>Create a rule handle. The first parameter (<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_LOGICAL_CONJUNCTION</span>) denotes how to combine all condition entries.
<pre class="prettyprint">
context_trigger_rule_h rule = NULL;
context_trigger_rule_create(CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;rule);
</pre></li>

<li>Define the event (&quot;at 10 PM every day&quot;). 
<p>A <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_TIME</span> type event entry is created, and a key-value comparison of <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TIME_OF_DAY == 1320</span> is set to the event.
</p>
<pre class="prettyprint">
// Composing an event
context_trigger_rule_entry_h event = NULL;
context_trigger_rule_event_create(CONTEXT_TRIGGER_EVENT_TIME, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;event);
context_trigger_rule_entry_add_key(event, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_TIME_OF_DAY);
context_trigger_rule_entry_add_comparison_int(event, CONTEXT_TRIGGER_TIME_OF_DAY, CONTEXT_TRIGGER_EQUAL_TO, 1320);

// Adding the event to the rule and releasing the resources
context_trigger_rule_add_entry(rule, event);
context_trigger_rule_entry_destroy(event);
</pre></li>

<li>Formulate the condition statement (&quot;battery is not charging&quot;) and add it to the rule handle.
<p>In the condition entry of <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_BATTERY</span>, the comparison statement is defined as the equality check (<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EQUAL_TO</span>) between the left operand (<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_IS_CHARGING</span>) and the right operand (<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_FALSE</span>).</p>
<pre class="prettyprint">
// Composing a condition
context_trigger_rule_entry_h condition = NULL;
context_trigger_rule_condition_create(CONTEXT_TRIGGER_CONDITION_BATTERY, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;condition);
context_trigger_rule_entry_add_key(condition, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_IS_CHARGING);
context_trigger_rule_entry_add_comparison_int(condition, CONTEXT_TRIGGER_IS_CHARGING, CONTEXT_TRIGGER_EQUAL_TO, CONTEXT_TRIGGER_FALSE);

// Adding the condition to the rule handle
context_trigger_rule_add_entry(rule, condition);
context_trigger_rule_entry_destroy(condition);
</pre></li></ol>

<p>The above example rule only contains 1 condition, and both the event and the condition contain 1 key-value comparison each. More complex rules, with multiple conditions and multiple comparisons in the event and each condition, can be also formulated. In addition, certain events and conditions require you to set <a href="#options">option parameters</a>.</p>


<h3>Comparison Attributes for Events and Conditions</h3>

<p>The following table summarizes the corresponding comparison attribute keys, with respect to the event and condition items, and the valid right operands for each attribute key. For information on the necessary privileges for each item, see the <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__CONTEXT__TRIGGER__MODULE.html">Contextual Trigger</a> API.</p>

<table>
	<caption>Table: Attribute keys and corresponding operands</caption>
	<tbody>
		<tr>
			<th>Event or condition</th>
			<th>Attribute key</th>
			<th>Type</th>
			<th>Valid operands</th>
		</tr>
		<tr>
			<td rowspan="2"><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_TIME</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TIME_OF_DAY</span></td>
			<td>Integer</td>
			<td>From 0 to 1439 (minute)</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_DAY_OF_WEEK</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_MON, CONTEXT_TRIGGER_TUE, CONTEXT_TRIGGER_WED, CONTEXT_TRIGGER_THU, CONTEXT_TRIGGER_FRI,
				CONTEXT_TRIGGER_SAT, CONTEXT_TRIGGER_SUN, CONTEXT_TRIGGER_WEEKDAY, CONTEXT_TRIGGER_WEEKEND
			</span></td>
		</tr>
		<tr>
			<td rowspan="3"><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_TIME</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TIME_OF_DAY</span></td>
			<td>Integer</td>
			<td>From 0 to 1439 (minute)</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_DAY_OF_WEEK</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_MON, CONTEXT_TRIGGER_TUE, CONTEXT_TRIGGER_WED, CONTEXT_TRIGGER_THU, CONTEXT_TRIGGER_FRI,
				CONTEXT_TRIGGER_SAT, CONTEXT_TRIGGER_SUN, CONTEXT_TRIGGER_WEEKDAY, CONTEXT_TRIGGER_WEEKEND
			</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_DAY_OF_MONTH</span></td>
			<td>Integer</td>
			<td>From 1 to 31</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_CHARGER</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_USB</span></p>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_CHARGER</span></p>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_USB</span></p></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_IS_CONNECTED</span></td>
			<td>Integer</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TRUE, CONTEXT_TRIGGER_FALSE</span></td>
		</tr>
		<tr>
			<td rowspan="2">
				<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_BATTERY</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_BATTERY</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_LEVEL</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_EMPTY, CONTEXT_TRIGGER_CRITICAL, CONTEXT_TRIGGER_LOW, CONTEXT_TRIGGER_NORMAL, CONTEXT_TRIGGER_HIGH, CONTEXT_TRIGGER_FULL
			</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_IS_CHARGING</span></td>
			<td>Integer</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TRUE, CONTEXT_TRIGGER_FALSE</span></td>
		</tr>
		<tr>
			<td>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_POWER_SAVING_MODE</span></p>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_POWER_SAVING_MODE</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_IS_ENABLED</span></td>
			<td>Integer</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TRUE, CONTEXT_TRIGGER_FALSE</span></td>
		</tr>
		<tr>
			<td>
				<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_GPS</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_GPS</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_STATE</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_DISABLED, CONTEXT_TRIGGER_SEARCHING, CONTEXT_TRIGGER_CONNECTED</span></td>
		</tr>
		<tr>
			<td rowspan="2">
				<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_HEADPHONE</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_HEADPHONE</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_IS_CONNECTED</span></td>
			<td>Integer</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TRUE, CONTEXT_TRIGGER_FALSE</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TYPE</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_NORMAL, CONTEXT_TRIGGER_HEADSET, CONTEXT_TRIGGER_BLUETOOTH
			</span></td>
		</tr>
		<tr>
			<td rowspan="2">
				<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_WIFI</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_WIFI</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_STATE</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_DISABLED, CONTEXT_TRIGGER_CONNECTED, CONTEXT_TRIGGER_UNCONNECTED
			</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_BSSID</span></td>
			<td>String</td>
			<td>Wi-Fi BSSID</td>
		</tr>
		<tr>
			<td rowspan="3">
				<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_CALL</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_CALL</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_STATE</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_IDLE, CONTEXT_TRIGGER_CONNECTING, CONTEXT_TRIGGER_CONNECTED
			</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_MEDIUM</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_VOICE, CONTEXT_TRIGGER_VIDEO</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_ADDRESS</span></td>
			<td>String</td>
			<td>Phone number</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_EMAIL</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_RECEIVED, CONTEXT_TRIGGER_SENT</span></td>
		</tr>
		<tr>
			<td rowspan="2"><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_MESSAGE</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_RECEIVED</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TYPE</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_SMS, CONTEXT_TRIGGER_MMS</span></td>
		</tr>
		<tr>
			<td rowspan="2">
				<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_ACTIVITY_STATIONARY</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_ACTIVITY_WALKING</span></p>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_ACTIVITY_RUNNING</span></p>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_ACTIVITY_IN_VEHICLE</span></p></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_DETECTED</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_ACCURACY</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_HIGH, CONTEXT_TRIGGER_NORMAL, CONTEXT_TRIGGER_LOW
			</span></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_PLACE</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_IN, CONTEXT_TRIGGER_OUT</span></td>
		</tr>
		<tr>
			<td rowspan="2"><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_APP_USE_FREQUENCY</span>
			<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_COMMUNICATION_FREQUENCY</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_RANK</span></td>
			<td>Integer</td>
			<td>Positive integer</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TOTAL_COUNT</span></td>
			<td>Integer</td>
			<td>Non-negative integer</td>
		</tr>
		<tr>
			<td>
				<span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_MUSIC_PLAYBACK_FREQUENCY</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_VIDEO_PLAYBACK_FREQUENCY</span></p>
			</td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TOTAL_COUNT</span></td>
			<td>Integer</td>
			<td>Non-negative integer</td>
		</tr>
	</tbody>
</table>

<p>The following comparison operators are allowed for specific attribute data types:
</p>

<ul>
	<li>For integer-type attributes:
		<ul>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EQUAL_TO</span></li>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_NOT_EQUAL_TO</span></li>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_GREATER_THAN</span></li>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_GREATER_THAN_OR_EQUAL_TO</span></li>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_LESS_THAN</span></li>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_LESS_THAN_OR_EQUAL_TO</span></li>
		</ul>
	</li>
	<li>For string-type attributes:
		<ul>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EQUAL_TO</span></li>
			<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_NOT_EQUAL_TO</span></li>
		</ul>
	</li>
</ul>


<h3 id="options" name="options">Options</h3>

<p>Certain events or conditions require the specification of some option values to clarify their monitoring or computation objective. For example, if an event is defined using <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_PLACE</span>, the target location must be specified by the place ID that can be retrieved using the <a href="../location/location_n.htm#manager">Location Manager</a>, as in the following example:</p>

<pre class="prettyprint">
// Getting the target place ID through the Location Manager API

int place_id;

// Composing an event &quot;when the user enters his home&quot;
context_trigger_rule_entry_h event = NULL;
context_trigger_rule_event_create(CONTEXT_TRIGGER_EVENT_PLACE, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;event);
context_trigger_rule_entry_add_option_int(event, CONTEXT_TRIGGER_PLACE_ID, place_id);
</pre>

<p>You can also use an attribute value of the event as an option (or a right operand of a comparison) in a condition. As an example, the logical statement &quot;when receiving a message, if the sender&#39;s number is the most frequently communicated number&quot; can be formulated as follows:
</p>
<pre class="prettyprint">
// Composing an event &quot;when receiving a message&quot;
context_trigger_rule_entry_h event = NULL;
context_trigger_rule_event_create(CONTEXT_TRIGGER_EVENT_MESSAGE, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;event);
context_trigger_rule_entry_add_key(event, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_EVENT);
context_trigger_rule_entry_add_comparison_string(event, CONTEXT_TRIGGER_EVENT, CONTEXT_TRIGGER_EQUAL_TO, CONTEXT_TRIGGER_RECEIVED);

// Composing a condition &quot;if the sender&#39;s number is the most frequently communicated number&quot;
context_trigger_rule_entry_h condition = NULL;
context_trigger_rule_condition_create(CONTEXT_TRIGGER_CONDITION_COMMUNICATION_FREQUENCY, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;condition);

// The message sender&#39;s address is used as an option of the condition.
context_trigger_rule_entry_add_option(condition, CONTEXT_TRIGGER_ADDRESS, CONTEXT_TRIGGER_ADDRESS);

// Checking if the frequency rank of the address is equal to 1
context_trigger_rule_entry_add_key(condition, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_RANK);
context_trigger_rule_entry_add_comparison_int(condition, CONTEXT_TRIGGER_RANK, CONTEXT_TRIGGER_EQUAL_TO, 1);
</pre>

<p>The following table lists the available options keys and the corresponding values.</p>

<table>
	<caption>Table: Options keys and corresponding values</caption>
	<tbody>
		<tr>
			<th>Event or condition</th>
			<th>Option key</th>
			<th>Type</th>
			<th>Valid value</th>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_PLACE</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_PLACE_ID</span></td>
			<td>Integer</td>
			<td>
				Place ID. For more information, see the <a href="../location/location_n.htm">Location</a> guide.
			</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_APP_USE_FREQUENCY</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_APP_ID</span></td>
			<td>String</td>
			<td>Application ID</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_COMMUNICATION_FREQUENCY</span></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_ADDRESS</span></td>
			<td>String</td>
			<td>Phone number</td>
		</tr>
		<tr>
			<td rowspan="2"><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_CONDITION_APP_USE_FREQUENCY</span>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_COMMUNICATION_FREQUENCY</span></p>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_MUSIC_PLAYBACK_FREQUENCY</span></p>
				<p><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_CONDITION_VIDEO_PLAYBACK_FREQUENCY
			</span></p></td>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TIME_OF_DAY</span></td>
			<td>String</td>
			<td>Time interval of the day. For example, &quot;13-15&quot; denotes &quot;from 1 PM to 3 PM&quot;.</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_DAY_OF_WEEK</span></td>
			<td>String</td>
			<td><span style="font-family: Courier New,Courier,monospace">
				CONTEXT_TRIGGER_MON, CONTEXT_TRIGGER_TUE, CONTEXT_TRIGGER_WED, CONTEXT_TRIGGER_THU, CONTEXT_TRIGGER_FRI,
				CONTEXT_TRIGGER_SAT, CONTEXT_TRIGGER_SUN, CONTEXT_TRIGGER_WEEKDAY, CONTEXT_TRIGGER_WEEKEND
			</span></td>
		</tr>
	</tbody>
</table>


<h3>Logical Conjunctions and Disjunctions</h3>

<p>A rule can contain multiple conditions. Some event and condition items provide more than 1 attribute key. For 1 attribute, more than 1 comparison statement can also be defined. For example, the value of an attribute is equal to A, B, or C. To combine multiple comparisons into an attribute, multiple attributes into an event or a condition, and multiple conditions into a rule, the contextual trigger allows you to choose 1 of the following logical operators:
</p>

<ul>
	<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_LOGICAL_CONJUNCTION</span>
		<p>It denotes logical &quot;AND&quot;. It means &quot;true only if all components are true&quot;.</p>
	</li>
	<li><span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_LOGICAL_DISJUNCTION</span>
		<p>It denotes logical &quot;OR&quot;. It means &quot;true if at least 1 component is true&quot;.</p>
	</li>
</ul>

<p>To use the conjunctions and disjunctions:</p>

<ul><li>Combining conditions into a rule

<p>With the logical conjunction operator, the rule evaluation becomes true if all the conditions are met. On the other hand, with the logical disjunction operator, the rule evaluation becomes true if at least 1 of the conditions is met. If a rule has 1 condition or no condition, the logical operator has no effect on the evaluation result. The following example shows how to set the proper logical operator between conditions when creating rules:</p>

<pre class="prettyprint">
// Composing an event and conditions
context_trigger_rule_entry_h battery_event;
context_trigger_rule_event_create(CONTEXT_TRIGGER_EVENT_BATTERY, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;battery_event);
context_trigger_rule_entry_add_key(battery_event, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_LEVEL);
context_trigger_rule_entry_add_comparison_string(battery_event, CONTEXT_TRIGGER_LEVEL, CONTEXT_TRIGGER_EQUAL_TO, CONTEXT_TRIGGER_CRITICAL);

context_trigger_rule_entry_h gps_condition;
context_trigger_rule_condition_create(CONTEXT_TRIGGER_CONDITION_GPS, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;gps_condition);
context_trigger_rule_entry_add_key(gps_condition, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_STATE);
context_trigger_rule_entry_add_comparison_string(gps_condition, CONTEXT_TRIGGER_STATE, CONTEXT_TRIGGER_NOT_EQUAL_TO, CONTEXT_TRIGGER_DISABLED);

context_trigger_rule_entry_h wifi_condition;
context_trigger_rule_condition_create(CONTEXT_TRIGGER_CONDITION_WIFI, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;wifi_condition);
context_trigger_rule_entry_add_key(wifi_condition, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_STATE);
context_trigger_rule_entry_add_comparison_string(wifi_condition, CONTEXT_TRIGGER_STATE, CONTEXT_TRIGGER_NOT_EQUAL_TO, CONTEXT_TRIGGER_DISABLED);

// Composing a rule &quot;when the battery level becomes critical, if GPS AND Wi-Fi are enabled&quot;
context_trigger_rule_h conjunction_rule;
context_trigger_rule_create(<span class="highlight">CONTEXT_TRIGGER_LOGICAL_CONJUNCTION</span>, &amp;conjunction_rule);
context_trigger_rule_add_entry(conjunction_rule, battery_event);
context_trigger_rule_add_entry(conjunction_rule, gps_condition);
context_trigger_rule_add_entry(conjunction_rule, wifi_condition);
context_trigger_rule_set_action_notification(conjunction_rule, ...);

// Composing a rule &quot;when battery level becomes critical, if GPS OR Wi-Fi is enabled&quot;
context_trigger_rule_h disjunction_rule;
context_trigger_rule_create(<span class="highlight">CONTEXT_TRIGGER_LOGICAL_DISJUNCTION</span>, &amp;disjunction_rule);
context_trigger_rule_add_entry(disjunction_rule, battery_event);
context_trigger_rule_add_entry(disjunction_rule, gps_condition);
context_trigger_rule_add_entry(disjunction_rule, wifi_condition);
context_trigger_rule_set_action_notification(disjunction_rule, ...);
</pre></li>

<li>Combining attributes into an event or condition

<p>Some event and condition items provide multiple attributes. The logical connection between attributes must be set properly to fulfill the requirement. For example, when you use <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_EVENT_TIME</span> to define a rule &quot;at 4 PM every Monday&quot;, the comparisons regarding the 2 attributes, <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TIME_OF_DAY</span> and <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_DAY_OF_WEEK</span> must be satisfied together.</p>
<p>On the contrary, using <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_APP_USE_FREQUENCY</span>, if you want to check whether a specific application belongs to the 5 most frequently used applications, or the application was used at least 10 times, both comparisons against <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_RANK</span> and <span style="font-family: Courier New,Courier,monospace">CONTEXT_TRIGGER_TOTAL_COUNT</span> must be connected by a logical disjunction.</p>
<p>The following example illustrates the cases described above:</p>

<pre class="prettyprint">
// Composing an event &quot;at 4 PM every Monday&quot;
context_trigger_rule_entry_h time_event;
context_trigger_rule_event_create(CONTEXT_TRIGGER_EVENT_TIME, <span class="highlight">CONTEXT_TRIGGER_LOGICAL_CONJUNCTION</span>, &amp;time_event);
context_trigger_rule_entry_add_key(time_event, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION,  CONTEXT_TRIGGER_TIME_OF_DAY);
context_trigger_rule_entry_add_comparison_int(time_event, CONTEXT_TRIGGER_TIME_OF_DAY, CONTEXT_TRIGGER_EQUAL_TO, 960);
context_trigger_rule_entry_add_key(time_event, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION,  CONTEXT_TRIGGER_DAY_OF_WEEK);
context_trigger_rule_entry_add_comparison_string(time_event, CONTEXT_TRIGGER_DAY_OF_WEEK, CONTEXT_TRIGGER_EQUAL_TO, CONTEXT_TRIGGER_MON);

// Composing a condition &quot;if an application belongs to the 5 most frequently used apps, or is used at least 10 times per day&quot;
context_trigger_rule_entry_h app_condition;
context_trigger_rule_condition_create(CONTEXT_TRIGGER_CONDITION_APP_USE_FREQUENCY, <span class="highlight">CONTEXT_TRIGGER_LOGICAL_DISJUNCTION</span>, &amp;app_condition);
context_trigger_rule_entry_add_option_string(app_condition, CONTEXT_TRIGGER_APP_ID, /* Application ID */);
context_trigger_rule_entry_add_key(app_condition, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_RANK);
context_trigger_rule_entry_add_comparison_int(app_condition, CONTEXT_TRIGGER_RANK, CONTEXT_TRIGGER_LESS_THAN_OR_EQUAL_TO, 5);
context_trigger_rule_entry_add_key(app_condition, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, CONTEXT_TRIGGER_TOTAL_COUNT);
context_trigger_rule_entry_add_comparison_int(app_condition, CONTEXT_TRIGGER_TOTAL_COUNT, CONTEXT_TRIGGER_GREATER_THAN_OR_EQUAL_TO, 10);
</pre></li>

<li>Combining comparisons into an attribute

<p>Similarly as above, regarding an attribute, you can combine multiple comparisons in different ways. For example, if you want to check that the battery level is full or high, use a logical disjunction. If you also want to check whether the current time is between 18:30 and 21:30, use a logical conjunction. The following example illustrates how to compose such conditions:</p>

<pre class="prettyprint">
// Composing a condition &quot;if the battery level is full or high&quot;
context_trigger_rule_entry_h battery_condition;
context_trigger_rule_condition_create(CONTEXT_TRIGGER_CONDITION_BATTERY, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;battery_condition);
context_trigger_rule_entry_add_key(battery_condition, <span class="highlight">CONTEXT_TRIGGER_LOGICAL_DISJUNCTION</span>, CONTEXT_TRIGGER_LEVEL);
context_trigger_rule_entry_add_comparison_string(battery_condition, CONTEXT_TRIGGER_LEVEL, CONTEXT_TRIGGER_EQUAL_TO, CONTEXT_TRIGGER_FULL);
context_trigger_rule_entry_add_comparison_string(battery_condition, CONTEXT_TRIGGER_LEVEL, CONTEXT_TRIGGER_EQUAL_TO, CONTEXT_TRIGGER_HIGH);

// Composing a condition &quot;if the current time is between 18:30 and 21:30&quot;
context_trigger_rule_entry_h time_condition;
context_trigger_rule_condition_create(CONTEXT_TRIGGER_CONDITION_TIME, CONTEXT_TRIGGER_LOGICAL_CONJUNCTION, &amp;time_condition);
context_trigger_rule_entry_add_key(time_condition, <span class="highlight">CONTEXT_TRIGGER_LOGICAL_CONJUNCTION</span>,  CONTEXT_TRIGGER_TIME_OF_DAY);
context_trigger_rule_entry_add_comparison_int(time_condition, CONTEXT_TRIGGER_TIME_OF_DAY, CONTEXT_TRIGGER_GREATER_THAN_OR_EQUAL_TO, 1110);
context_trigger_rule_entry_add_comparison_int(time_condition, CONTEXT_TRIGGER_TIME_OF_DAY, CONTEXT_TRIGGER_LESS_THAN_OR_EQUAL_TO, 1290);
</pre></li></ul>


<h2 id="action" name="action">Actions</h2>

<p>When a rule is satisfied (the event has occurred and the conditions are met), the corresponding action is triggered. Only 1 action can be set for a rule, and the action can be one of the following:</p>

<ul>
	<li>Application launch request:
		<p>The contextual trigger allows you to set an <a href="../app/application_n.htm#app_controls">App Control</a> as an action. You can utilize the app control functionalities by developing an application with the corresponding app controls to execute a series of tasks when a rule is satisfied.</p></li>
	<li>Notification posting:
		<p>A basic form of notification can be set as an action. A notification can contain a title, content body text, an icon, and an app control to be executed. For more information, see the <a href="../app/notification_n.htm">Notification</a> guide.</p></li>
</ul>


<script type="text/javascript" src="../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../../images/btn_top.gif" alt="Go to top" /></a>
<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>
