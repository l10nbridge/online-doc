<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" type="text/css" href="../../css/styles.css" />
	<link rel="stylesheet" type="text/css" href="../../css/snippet.css" />
	<script type="text/javascript" src="../../scripts/snippet.js"></script>	
	<script type="text/javascript" src="../../scripts/jquery.util.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/core.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/search.js" charset="utf-8"></script>
  <title>Application</title> 
 </head> 
 <body onload="prettyPrint()" style="overflow: auto;">
 
 <div id="toc-navigation">
	<div id="profile">
		<p><img alt="Mobile native" src="../../images/mobile_s_n.png"/> <img alt="Wearable native" src="../../images/wearable_s_n.png"/></p>
	</div>
	
	<div id="toc_border"><div id="toc">
		<p class="toc-title">Content</p>
        <ul class="toc">
			<li><a href="#loop">Managing the Event Loop</a></li>
			<li><a href="#callback">Registering Callbacks for Events</a></li>
			<li><a href="#state_trans">Managing Application States and Transitions</a></li>
			<li><a href="#allow_bg">Allowing Applications to Run on the Background</a></li>
        </ul>
		<p class="toc-title">Related Info</p>
		<ul class="toc">
			<li><a href="../../../../org.tizen.tutorials/html/native/app_framework/application_tutorial_n.htm">Application Tutorial</a></li>
			<li><a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__APPLICATION__MODULE.html">Application API for Mobile Native</a></li>   
			<li><a href="../../../../org.tizen.native.wearable.apireference/group__CAPI__APPLICATION__MODULE.html">Application API for Wearable Native</a></li> 
			</ul>
	</div></div>
</div>

<div id="container"><div id="contents"><div class="content">
<h1>Application</h1> 
<p>A Tizen native application is similar to a conventional Linux application, with some additional features optimized for mobile devices. The additional features have constraints, such as a relatively small screen size and lack of system resources compared to a larger system. For example, for power management reasons, the application can take actions to reduce usage when it finds out that it has its display window covered over by another application window. State change events are delivered to make it possible to detect these situations.</p>

<p>The Application API provides interfaces for the following categories:</p>
<ul>
  <li><a href="#loop">Starting or exiting the main event loop</a> (mandatory for every Tizen native application)</li>
  <li><a href="#callback">Registering callbacks for application state change events</a></li>
  <li><a href="#callback">Registering callbacks for basic system events</a></li>
  <li><a href="#state_trans">Managing application states and transitions</a></li>
  <li><a href="#allow_bg">Allowing applications to run on the background</a></li>
</ul>

<p>In addition, you can use sub-category APIs to:</p>
<ul>
  <li><a href="alarm_n.htm">Handle alarms with the Alarm API</a></li>
  <li><a href="appcontrol_n.htm">Launch applications with the App Control API</a></li>  
  <li><a href="internationalization_n.htm">Localize application strings with the Internationalization API</a></li> 
  <li><a href="event_n.htm">Broadcast and subscribe to events with the Event API</a> (in <strong>mobile applications only</strong>)</li>
  <li><a href="../../../../org.tizen.tutorials/html/native/app_framework/preference_tutorial_n.htm#manage_pref">Manage application preferences</a></li>
</ul>
  
  <h2 id="loop" name="loop">Managing the Event Loop</h2>
<p>In order for an application to operate successfully, it must receive events from the platform. For this, it must start the main event loop - this is mandatory for all Tizen native applications.</p>
<p>The <span style="font-family: Courier New,Courier,monospace">ui_app_main()</span> function is used to start the event loop. Before calling this function, set up the <span style="font-family: Courier New,Courier,monospace">app_event_callback_s structure</span> variable, which is passed to the function.</p>

<p>For more information about launching applications, see <a href="appcontrol_n.htm">App Control</a>.</p>

<h2 id="callback" name="callback">Registering Callbacks for Events</h2>
<p>The following table lists the application state change events.</p>

  <table> 
   <caption>
     Table: Application state change events
   </caption> 
   <tbody> 
    <tr> 
     <th>Callback</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">app_create_cb()</span></td> 
     <td>Used to take necessary actions before the main event loop starts. Place the UI generation code here to prevent missing any events from your application UI.</td> 
    </tr> 
     <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">app_pause_cb()</span></td> 
     <td>Used to take necessary actions when the application becomes invisible. For example, release memory resources so other applications can use them. Do not starve the foreground application that is interacting with the user.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">app_resume_cb()</span></td> 
     <td>Used to take necessary actions when the application becomes visible. If you relinquish anything in the  <span style="font-family: Courier New,Courier,monospace">app_pause_cb()</span> callback, re-allocate those resources here before the application resumes.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">app_terminate_cb()</span></td> 
     <td>Used to take necessary actions when the application is terminating. Release all resources, especially any allocations and shared resources, so that other running applications can fully use any shared resources.</td> 
    </tr> 
   </tbody> 
  </table>
 
<p>For more information, see <a href="#state_trans">Managing Application States and Transitions</a>.</p>

<p>To listen to system events, use the <span style="font-family: Courier New,Courier,monospace">ui_app_add_event_handler()</span> function. The system events are triggered with the <span style="font-family: Courier New,Courier,monospace">app_event_cb()</span> callback function. The following table lists the event types.</p>

  <table> 
   <caption>
     Table: Event types
   </caption> 
   <tbody> 
    <tr> 
     <th>Event type</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">APP_EVENT_LOW_MEMORY</span></td> 
     <td>Event type for the callback function that is responsible for saving data in the main memory to a persistent memory or storage to avoid data loss in case the Tizen platform Low Memory Killer kills your application to get more free memory. The callback function must also release any cached data in the main memory to secure more free memory.</td> 
    </tr> 
     <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">APP_EVENT_LOW_BATTERY</span></td> 
     <td>Event type for the callback function that is responsible for saving data in the main memory to a persistent memory or storage to avoid data loss in case the power goes off completely. The callback function must also stop heavy CPU consumption or power consumption activities to save the remaining power.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">APP_EVENT_DEVICE_ORIENTATION_CHANGED</span></td> 
     <td>Event type for the callback function that is responsible for changing the display orientation to match the device orientation.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">APP_EVENT_LANGUAGE_CHANGED</span></td> 
     <td>Event type for the callback function that is responsible for refreshing the display into the new language.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">APP_EVENT_REGION_FORMAT_CHANGED</span></td> 
     <td>Event type for the callback function that is responsible for refreshing the display into the new time zone.</td> 
    </tr> 
	<tr>
	<td><span style="font-family: Courier New,Courier,monospace">APP_EVENT_SUSPENDED_STATE_CHANGED</span></td> 
	<td>Event type for the callback function that is responsible for taking necessary actions before entering the suspended state or after exiting from the state. (Supported since Tizen 2.4.)</td> 
	</tr>
   </tbody> 
  </table>  
   
<h2 id="state_trans" name="state_trans">Managing Application States and Transitions</h2> 

<p>The Tizen native application can be in one of several different states. Typically, the application is launched by the user from the Launcher, or by another application. As the application is starting, the <span style="font-family: Courier New,Courier,monospace">app_create_cb()</span> callback is executed and the main event loop starts. The application now normally becomes the frontmost window, with focus. When the application loses the frontmost or focus status, the <span style="font-family: Courier New,Courier,monospace">app_pause_cb()</span> callback is invoked and your application goes into a pause state. The pause state means that the application is not terminated but is running in the background. The application can go into a pause state because:</p>
<ul>
  <li>A new application is launched from the request of your application.</li>
  <li>The user requests to go to the home screen.</li>
  <li>A system event occurs and causes a resident application with a higher priority (such as an incoming phone call) to become active and hide your application temporarily.</li>
  <li>An alarm is triggered for another application, which becomes the top-most window and hides your application.</li>
</ul> 
<p>When your application becomes visible again, the <span style="font-family: Courier New,Courier,monospace">app_resume_cb()</span> callback is invoked. This happens because:</p>
<ul>
  <li>Another application requests your application to run (perhaps the Task Navigator, which shows all running applications and lets the user select any application to run).</li>
  <li>All applications on top of your application in the window stack finish.</li>
  <li>An alarm is triggered for your application, so it becomes the top-most window and hides other applications.</li>
</ul>

<p>When your application starts exiting, the <span style="font-family: Courier New,Courier,monospace">app_terminate_cb()</span> callback is invoked. Your application terminates because:</p>
<ul>
  <li>Your application itself requests to exit by calling the <span style="font-family: Courier New,Courier,monospace">ui_app_exit()</span> function to terminate the event loop.</li>
  <li>The Low Memory Killer is killing your application in a low memory situation.</li>
</ul>
<p>The application state changes are managed by the underlying framework. The following figure and table illustrate the application states.</p>

  <p class="figure">Figure: Application states</p> 
  <p align="center"><img alt="Application state transitions" src="../../images/app_states.png" /></p>  
  
  <table> 
   <caption>
     Table: Application states
   </caption> 
   <tbody> 
    <tr> 
     <th>State</th> 
     <th>Description</th> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">READY</span></td> 
     <td>Application is launched.</td> 
    </tr> 
     <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">CREATED</span></td> 
     <td>Application starts the main loop.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">RUNNING</span></td> 
     <td>Application is running and visible to the user.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">PAUSED</span></td> 
     <td>Application is running but invisible to the user.</td> 
    </tr> 
    <tr> 
     <td><span style="font-family: Courier New,Courier,monospace">TERMINATED</span></td> 
     <td>Application is terminated.</td> 
    </tr> 
   </tbody> 
  </table>   
  
  <p>The Application API defines 5 states with corresponding transition handlers. The state transition is notified through a state transition callback function, whether the application is created, running, paused, resumed, or terminated. The application must <a href="../../../../org.tizen.tutorials/html/native/app_framework/application_tutorial_n.htm#fundamentals">react to each state change appropriately</a>.</p>
  
  <p class="figure">Figure: Application state transitions</p> 
  <p align="center"><img alt="Application state transitions" src="../../images/app_state_transitions.png" /></p>
 
<h2 id="allow_bg" name="allow_bg">Allowing Applications to Run on the Background</h2>

<p>Since Tizen 2.4, the application is not allowed to run on the background except when it is explicitly declared to do so. The following table lists the background categories that allow the application to run on the background.</p>

<table id="allow_bg_table">
   <caption>Table: Allowed background application policy</caption> 
   <tbody> 
    <tr> 
     <th>Background category</th> 
     <th>Description</th>
<th>Related APIs</th>
<th>Manifest file &lt;background-category&gt; element value</th> 
    </tr> 
    <tr> 
     <td>Media</td> 
     <td>Playing audio, recording, and outputting streaming video on the background</td>
<td>Multimedia API (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__MEDIA__FRAMEWORK.html">mobile</a> and <a href="../../../../org.tizen.native.wearable.apireference/group__CAPI__MEDIA__FRAMEWORK.html">wearable</a> applications)</td>
<td><span style="font-family: Courier New,Courier,monospace">media</span></td> 
    </tr> 
     <tr> 
     <td>Download</td> 
     <td>Downloading data with the Tizen Download-manager API</td>
<td>Download API (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__WEB__DOWNLOAD__MODULE.html">mobile</a> applications)</td>
<td><span style="font-family: Courier New,Courier,monospace">download</span></td> 
    </tr> 
    <tr> 
     <td>Background network</td> 
     <td>Processing general network operations on the background (such as sync-manager, IM, and VOIP)</td>
<td>Sync Manager API (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__SYNC__MANAGER__MODULE.html">mobile</a> applications), Socket, and Curl API (in <a href="../../../../org.tizen.native.mobile.apireference/group__OPENSRC__CURL__FRAMEWORK.html">mobile</a> and <a href="../../../../org.tizen.native.wearable.apireference/group__OPENSRC__CURL__FRAMEWORK.html">wearable</a> applications)</td>
<td><span style="font-family: Courier New,Courier,monospace">background-network</span></td> 
    </tr>
<tr> 
     <td>Location</td> 
     <td>Processing location data on the background</td>
<td>Location API (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__LOCATION__FRAMEWORK.html">mobile</a> and <a href="../../../../org.tizen.native.wearable.apireference/group__CAPI__LOCATION__FRAMEWORK.html">wearable</a> applications)</td>
<td><span style="font-family: Courier New,Courier,monospace">location</span></td> 
    </tr>
<tr> 
     <td>Sensor (context)</td> 
     <td>Processing context data from the sensors, such as gesture</td>
<td>Sensor API (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__SYSTEM__SENSOR__MODULE.html">mobile</a> and <a href="../../../../org.tizen.native.wearable.apireference/group__CAPI__SYSTEM__SENSOR__MODULE.html">wearable</a> applications)</td>
<td><span style="font-family: Courier New,Courier,monospace">sensor</span></td> 
    </tr>
<tr> 
  <td>IoT Communication/Connectivity</td> 
     <td>Communicating between external devices on the background (such as Wi-Fi and Bluetooth)</td>
<td>Wi-Fi (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__NETWORK__WIFI__MODULE.html">mobile</a> and <a href="../../../../org.tizen.native.wearable.apireference/group__CAPI__NETWORK__WIFI__MODULE.html">wearable</a> applications) and Bluetooth API (in <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__NETWORK__BLUETOOTH__MODULE.html">mobile</a> and <a href="../../../../org.tizen.native.wearable.apireference/group__CAPI__NETWORK__BLUETOOTH__MODULE.html">wearable</a> applications)</td>
<td><span style="font-family: Courier New,Courier,monospace">iot-communication</span></td> 
    </tr>
  </tbody> 
  </table>

<h3 id="bg-category" name="bg-category">Describing the Background Category</h3>
<p>An application with a background running capability must declare the background category in its manifest file:</p>

<pre class="prettyprint">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns=&quot;http://tizen.org/ns/packages&quot; api-version=&quot;2.4&quot; package=&quot;org.tizen.test&quot; version=&quot;1.0.0&quot;&gt;
&nbsp;&nbsp;&nbsp;&lt;ui-application appid=&quot;org.tizen.test&quot; exec=&quot;text&quot; type=&quot;capp&quot; multiple=&quot;false&quot; taskmanage=&quot;true&quot; nodisplay=&quot;false&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;icon&gt;rest.png&lt;/icon&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;label&gt;rest&lt;/label&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--For API version 2.4 or higher--&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;background-category value=&quot;media&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;background-category value=&quot;download&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;background-category value=&quot;background-network&quot;/&gt;
&nbsp;&nbsp;&nbsp;&lt;/ui-application&gt;
&nbsp;&nbsp;&nbsp;&lt;service-application appid=&quot;org.tizen.test-service&quot; exec=&quot;test-service&quot; multiple=&quot;false&quot; type=&quot;capp&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;background-category value=&quot;background-network&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;background-category value=&quot;location&quot;/&gt;
&nbsp;&nbsp;&nbsp;&lt;/service-application&gt;
&lt;/manifest&gt;
</pre>
<table class="note">
  <tbody>
    <tr>
      <th class="note">Note</th>
    </tr>
    <tr>
	<td class="note">The <span style="font-family: Courier New,Courier,monospace">&lt;background-category&gt;</span> element is supported since the API version 2.4. An application with a <span style="font-family: Courier New,Courier,monospace">&lt;background-category&gt;</span> element declared can fail to be installed on devices with a Tizen version lower than 2.4. In this case, declare the background category as <span style="font-family: Courier New,Courier,monospace">&lt;metadata key=&quot;http://tizen.org/metadata/background-category/&lt;value&gt;&quot;/&gt;</span>.</td>
     </tr>
	<tr>
<td class="note">
<pre class="prettyprint">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns=&quot;http://tizen.org/ns/packages&quot; api-version=&quot;2.3&quot; package=&quot;org.tizen.test&quot; version=&quot;1.0.0&quot;&gt;
&nbsp;&nbsp;&nbsp;&lt;ui-application appid=&quot;org.tizen.test&quot; exec=&quot;text&quot; type=&quot;capp&quot; multiple=&quot;false&quot; taskmanage=&quot;true&quot; nodisplay=&quot;false&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;icon&gt;rest.png&lt;/icon&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;label&gt;rest&lt;/label&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--For API version lower than 2.4--&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;metadata key=&quot;http://tizen.org/metadata/background-category/media&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;metadata key=&quot;http://tizen.org/metadata/background-category/download&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;metadata key=&quot;http://tizen.org/metadata/background-category/background-network&quot;/&gt;
&nbsp;&nbsp;&nbsp;&lt;/ui-application&gt;
&nbsp;&nbsp;&nbsp;&lt;service-application appid=&quot;org.tizen.test-service&quot; exec=&quot;test-service&quot; multiple=&quot;false&quot; type=&quot;capp&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;metadata key=&quot;http://tizen.org/metadata/background-category/background-network&quot;/&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;metadata key=&quot;http://tizen.org/metadata/background-category/location&quot;/&gt;
&nbsp;&nbsp;&nbsp;&lt;/service-application&gt;
&lt;/manifest&gt;
</pre>
<p>The <span style="font-family: Courier New,Coruier,monospace">&lt;metadata key=&quot;http://tizen.org/metadata/bacgkround-category/&lt;value&gt;&quot;/&gt;</span> element has no effect on Tizen 2.3 devices, but, in Tizen 2.4 or higher devices, it has the same effect as the <span style="font-family: Courier New,Courier,monospace">&lt;background-category&gt;</span> element.</p>
	</td>
	</tr>
   </tbody>
 </table>

<p>The background category of your application can be specified in the
<a href="../../../../org.tizen.gettingstarted/html/native/process/setting_properties_n.htm#manifest">application project settings</a> in the IDE.</p>

<script type="text/javascript" src="../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>	