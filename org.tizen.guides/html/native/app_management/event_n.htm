<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" type="text/css" href="../../css/styles.css" />
	<link rel="stylesheet" type="text/css" href="../../css/snippet.css" />
	<script type="text/javascript" src="../../scripts/snippet.js"></script>	
	<script type="text/javascript" src="../../scripts/jquery.util.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/core.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/search.js" charset="utf-8"></script>
  <title>Event Broadcast and Subscription</title> 
 </head> 
 <body onload="prettyPrint()" style="overflow: auto;">
 
 <div id="toc-navigation">
	<div id="profile">
		<p><img alt="Mobile native" src="../../images/mobile_s_n.png"/></p>
	</div>

	<div id="toc_border"><div id="toc">
		<p class="toc-title">Dependencies</p>
		<ul class="toc">
			<li>Tizen Platform 2.4 and Higher for Mobile</li>
		</ul>
		<p class="toc-title">Content</p>
		<ul class="toc">
			<li><a href="#prerequisites">Prerequisites</a></li>
			<li><a href="#manage">Subscribing to an Event</a></li>
			<li><a href="#broadcast">Publishing an Event</a></li>	 
			<li><a href="#launch">Managing Launch-On-Events</a></li>	 	 		
		</ul>
		<p class="toc-title">Related Info</p>
		<ul class="toc">
			<li><a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__EVENT__MODULE.html">Event API for Mobile Native</a></li>
			<li><a href="https://developer.tizen.org/development/sample/native/AppFW/Event" target="_blank">Event Sample Description</a></li>
			<li><a href="https://developer.tizen.org/development/sample/native/AppFW/LaunchOnEventServiceApp" target="_blank">LaunchOnEventServiceApp Sample Description</a></li>
		</ul>
	</div></div>
</div>

<div id="container"><div id="contents"><div class="content">

<h1>Event Broadcast and Subscription</h1>

<p>The application can <a href="#broadcast">broadcast its own events</a> to all listeners, and <a href="#manage">subscribe to events</a>. The events can be either predefined system events from the platform (only platform modules can broadcast system events) or user-defined events (broadcast by UI and service applications). Before you start, remember to <a href="#prerequisites">prepare your application to use the event functionality</a>.</p>
<p>This feature is supported in mobile applications only.</p>

<p>The main features of the Event API are:</p>
<ul>
<li>Event publication
<p>To publish an event, use the <span style="font-family: Courier New,Courier,monospace">event_publish_app_event()</span> and <span style="font-family: Courier New,Courier,monospace">event_publish_trusted_app_event()</span> functions. The <span style="font-family: Courier New,Courier,monospace">event_publish_trusted_app_event()</span> function publishes a trusted event which can only be received by the application that has the same signature as the publishing application.</p>
</li>

<li>Event subscription
<p>To subscribe to an event, use the <span style="font-family: Courier New,Courier,monospace">event_add_event_handler()</span> function. When no longer needed, unsubscribe the event with the <span style="font-family: Courier New,Courier,monospace">event_remove_event_handler()</span> function.</p>
</li>

<li>Launch-On-Events
<p>Service applications can be <a href="#launch">launched when a desired target event occurs</a>.</p>
<p>To register an interest in a Launch-On-Event, define the <span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/launch_on_event</span> operation in the <span style="font-family: Courier New,Courier,monospace">tizen-manifest.xml</span> file.</p>

<p>The following table shows the system events that support Launch-On-Event.</p>

<table>
	   <caption>
			   Table: System events supporting Launch-On-Event
	   </caption>
	   <tbody>
	  <tr>
			<th>Name</th>
			<th>Condition</th>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.battery_charger_status</span></td>
			<td>When the charger state is <span style="font-family: Courier New,Courier,monospace">&quot;connected&quot;</span>.</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.usb_status</span></td>
			<td>When the USB state is <span style="font-family: Courier New,Courier,monospace">&quot;connected&quot;</span>.</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.earjack_status</span></td>
			<td>When the earjack status is <span style="font-family: Courier New,Courier,monospace">&quot;connected&quot;</span>.</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.incoming_msg</span></td>
			<td>When the <span style="font-family: Courier New,Courier,monospace">msg_type</span> and <span style="font-family: Courier New,Courier,monospace">msg_id</span> exist.</td>
		</tr>
	</tbody>
</table>
</li>
</ul>

<p>The application can be suspended while in the background, causing a pause in event handling. Since the application cannot receive events in the suspended state, they are all delivered in series after the application exits the suspended state. Consider how to manage this situation and prevent the application from being flooded with events:</p>
<ul><li>To handle events in the background without going to a suspended state, <a href="ui_app_n.htm#allow_bg">declare a background category</a>. </li>
<li>To avoid receiving any events that are triggered while the application is suspended, remove the event handler before entering the suspended state and add it back after exiting the suspended state. You can <a href="ui_app_n.htm#callback">manage the event handler</a> addition and removal in the <span style="font-family: Courier New,Courier,monospace">APP_EVENT_SUSPENDED_STATE_CHANGED</span> event callback, which is triggered each time the application enters and exist the suspended state.</li></ul>

<p>The following table lists the platform event types.</p>
<table>
	   <caption>
			   Table: Platform event types
	   </caption>
	   <tbody>
	  <tr>
			   <th rowspan="2">Module</th>
			   <th rowspan="2">Category</th>
			   <th rowspan="2">Event name</th>
			   <th colspan="2">Event data</th>
			   <th rowspan="2">Condition</th>
			   <th rowspan="2">Notes</th>
	   </tr>
	   <tr>
			   <th>Key</th>
			   <th>Value</th>
	   </tr>
	   <tr>
			   <td rowspan="2">capi-system-device</td>
			   <td rowspan="2">battery</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.battery_charger_status</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">battery_charger_status</span></td>
			   <td>				<ul>
				<li>
				<p><span style="font-family: Courier New,Courier,monospace">&quot;disconnected&quot;</span>: Charger is not connected</p>
				</li>
				<li>
				<p><span style="font-family: Courier New,Courier,monospace">&quot;connected&quot;</span>: Charger is connected</p>
				</li>
				<li>
				<p><span style="font-family: Courier New,Courier,monospace">&quot;charging&quot;</span>: Charging is enabled</p>
				</li>
				<li>
				<p><span style="font-family: Courier New,Courier,monospace">&quot;discharging&quot;</span>: Charging is disabled (for example, 100% full state) </p>
				</li>
				</ul>
				</td>
				<td>
				When the charger has been connected or disconnected, or when the charging state has changed (charging or not).
				</td>
				<td>
				If there is an earlier occurrence regarding this event, you receive the event as soon as you register an event handler for this event. You can use this earlier event data as the initial value.
				</td>
	   </tr>
	   <tr>
				<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.battery_level_status</span></td>
				<td><span style="font-family: Courier New,Courier,monospace">battery_level_status</span></td>
				<td>				<ul>
				<li>
				<p><span style="font-family: Courier New,Courier,monospace">&quot;empty&quot;</span>: Level &lt;= 1% </p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;critical&quot;</span>: Level &lt;= 5% </p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;low&quot;</span>: 5% &lt; level &lt;= 15% </p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;high&quot;</span>: 15% &lt; level &lt;= 95% </p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;full&quot;</span>: Level &gt; 95% </p>
				</li>
				</ul>
				</td>
				<td>
				When the battery level has changed.
			</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">device_battery_get_level_status()</span> function.</td>			
	   </tr>
	   <tr>
			   <td rowspan="3">deviced</td>
			   <td>usb</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.usb_status</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">usb_status</span></td>
			   <td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;disconnected&quot;</span>: USB cable is not connected</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;connected&quot;</span>: USB cable is connected, but the service is not available</p></li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;available&quot;</span>: USB service is available (for example, mtp or SDB)</p>
				</li>
				</ul>
				</td>
			    <td>
				When the USB cable has been connected or disconnected, or when the USB service state has changed.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">RUNTIME_INFO_KEY_USB_CONNECTED</span> key.</td>
	   </tr>
	   <tr>
				<td>earjack</td>
				<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.earjack_status</span></td>
				<td><span style="font-family: Courier New,Courier,monospace">earjack_status</span></td>
				<td>				<ul>
				<li>
				<p><span style="font-family: Courier New,Courier,monospace">&quot;disconnected&quot;</span>: Earjack is not connected</p>
				</li>
				<li>
				<p><span style="font-family: Courier New,Courier,monospace">&quot;connected&quot;</span>: Earjack is connected</p>
				</li>
				</ul>
				</td>
				<td>
				When the earjack connection state has changed.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">RUNTIME_INFO_KEY_AUDIO_JACK_STATUS</span> key.</td>
		</tr>
		<tr>
				<td>display</td>
				<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.display_state</span></td>
				<td><span style="font-family: Courier New,Courier,monospace">display_state</span></td>
				<td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;normal&quot;</span>: Display on, normal brightness</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;dim&quot;</span>: Display on, dimmed brightness</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span>: Display off</p>
				</li>
				</ul>
				</td>
				<td>When the display state has changed.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">device_display_get_state()</span> function.</td>
		</tr>
		<tr>
			   <td rowspan="2">systemd</td>
			   <td rowspan="2">system</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.boot_completed</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">N/A</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">N/A</span> 
				</td>
			   	<td>When platform booting has been completed.
				</td>
			<td>You can treat the initial value as <span style="font-family: Courier New,Courier,monospace">false</span> before you receive this event. If the application is already in a boot-completed state before you register an event handler, you receive the event as soon as you register the event handler.</td>	
	   </tr>
	   <tr>
				<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.system_shutdown</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">N/A</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">N/A</span>
				</td>
				<td>
				When the system power-off has been started.
				</td>
				<td>You can treat the initial value as <span style="font-family: Courier New,Courier,monospace">false</span> before you receive this event. If the application is already in a shutting-down state before you register an event handler, you receive the event as soon as you register the event handler.</td>
		</tr>
		<tr>
			   <td>resourced</td>
			   <td>ram memory</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.low_memory</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">low_memory</span></td>
			   <td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;normal&quot;</span>: Available &gt; 200MB</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;soft_warning&quot;</span>: 100MB &lt; available &lt;= 200MB</p></li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;hard_warning&quot;</span>: Available &lt;= 100MB</p></li>
				</ul>
				<table class="note">
				<tbody>
					<tr>
					<th class="note">Note</th>
					</tr>
					<tr>
					<td class="note">Above numbers can differ according to the total RAM size of the target device.</td>
					</tr>
					</tbody>
					</table>
				</td>
			  	<td>
				When the size of available memory has changed.
				</td>
				<td>
				If there is an earlier occurrence regarding this event, you receive the event as soon as you register an event handler for this event. You can use this earlier event data as the initial value.</td>
	   </tr>
	   <tr>
			   <td rowspan="4">network</td>
			   <td rowspan="4">connectivity</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.wifi_state</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">wifi_state</span></td>
			   <td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span>: Wi-Fi on</p></li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span>: Wi-Fi off</p></li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;connected&quot;</span>: Wi-Fi connection established</p></li>
				</ul>
				</td>
			   	<td>
				When the Wi-Fi state has changed.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">connection_get_wifi_state()</span> function.</td>
	   </tr>
	   <tr>
				<td rowspan="3"><span style="font-family: Courier New,Courier,monospace">tizen.system.event.bt_state</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">bt_state</span></td>
			   <td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span>: Legacy Bluetooth off</p></li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span>: Legacy Bluetooth on</p></li>
				</ul>
				</td>
				<td>
				When the Bluetooth state has changed.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">bt_adapter_get_state()</span> function.</td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">bt_le_state</span></td>
			   <td><ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span>: LE function off</p></li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span>: LE function on</p></li>
				</ul>
				</td>
			   	<td>
				When Bluetooth LE state has changed.
				</td>
				<td></td>
		</tr>
		<tr>
			<td><span style="font-family: Courier New,Courier,monospace">bt_transfering_state</span></td>
			   <td><ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;non_transfering&quot;</span>: Idle state</p></li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;transfering&quot;</span>: File is transferring</p></li>
				</ul>
				</td>
				<td>
				When the file transfer state has changed.	
				</td>
				<td></td>
		</tr>
		<tr>
				<td rowspan="3">libslp-location</td>
			   <td rowspan="3">location</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.location_enable_state</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">location_enable_state</span></td>
			   <td><ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;disabled&quot;</span>: Location disabled</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;enabled&quot;</span>: Location enabled</p>
				</li>
				</ul>
				</td>
				<td>
				When the <span style="font-family: Courier New,Courier,monospace">location-enable_state</span> has been changed, for example, by the user toggling the location setting in the settings menu or quick panel.		
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">location_manager_is_enabled_method()</span> function.</td>
		</tr>
		<tr>
		       <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.gps_enable_state</span></td>
				<td><span style="font-family: Courier New,Courier,monospace">gps_enable_state</span></td>
			   <td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;disabled&quot;</span>: GPS disabled</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;enabled&quot;</span>: GPS enabled</p>
				</li>
				</ul>
				</td>
			   	<td>
				When the <span style="font-family: Courier New,Courier,monospace">gps-enable_state</span> has changed.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">location_manager_is_enabled_method()</span> function.</td>
		</tr>
		<tr>
				<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.nps_enable_state</span></td>
				<td><span style="font-family: Courier New,Courier,monospace">nps_enable_state</span></td>
			   <td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;disabled&quot;</span>: NPS disabled</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;enabled&quot;</span>: NPS enabled</p>
				</li>
				</ul>
				</td>
			   	<td>
				When the NPS setting has been changed, for example, by the user toggling the location settings.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">location_manager_is_enabled_method()</span> function.</td>
		</tr>
		<tr>
				<td rowspan="2">msg-service</td>
			   <td rowspan="2">message</td>
			   <td rowspan="2"><span style="font-family: Courier New,Courier,monospace">tizen.system.event.incoming_msg</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">msg_type</span></td>
			   <td>				<ul>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;sms&quot;</span>: SMS-type message</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;push&quot;</span>: Push-type message</p>
				</li>
				<li><p><span style="font-family: Courier New,Courier,monospace">&quot;cb&quot;</span>: Cb-type message</p>
				</li>
				</ul>
				</td>
				<td>
				When an SMS, push, or CB message has been received.
				</td>
				<td></td>
		</tr>
		<tr>
				<td><span style="font-family: Courier New,Courier,monospace">msg_id</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">msg_id</span>: Message ID of the received message (string of the unsigned <span style="font-family: Courier New,Courier,monospace">int</span> type value)
				</td>
				<td>
				</td>
				<td></td>
		</tr>
		<tr>
				<td>alarm-manager</td>
			   <td>time</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.time_changed</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">N/A</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">N/A</span></td>
			   	<td>
				When the system time setting has changed.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">alarm_get_current_time()</span> function.</td>
		</tr>
		<tr>
				<td rowspan="10">setting</td>
			   <td>time</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.time_zone</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">time_zone</span></td>
			   <td>The value of this key is the time zone value of the time zone database, for example, &quot;Asia/Seoul&quot;, &quot;America/New_York&quot;. For more information, see the IANA Time Zone Database.
				</td>
			   	<td>
				When the time zone has changed.
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_LOCALE_TIMEZONE</span> key.</td>
		</tr>
		<tr>
			   <td rowspan="3">locale</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.hour_format</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">hour_format</span></td>
			   <td><ul><li><span style="font-family: Courier New,Courier,monospace">&quot;12&quot;</span></li>
				<li><span style="font-family: Courier New,Courier,monospace">&quot;24&quot;</span></li></ul>
				</td>
			   	<td>
				When the <span style="font-family: Courier New,Courier,monospace">hour_format</span> has changed, for example, by the user toggling the date and time settings for the 24-hour clock (where <strong>OFF</strong> stands for the 12-hour clock).
			</td>
			<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_LOCALE_TIMEFORMAT_24HOUR</span> key.</td>
		</tr>
		<tr>
				<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.language_set</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">language_set</span></td>
			   <td>The value of this key is full name of locale, for example, <span style="font-family: Courier New,Courier,monospace">ko_KR.UTF8</span> in case of Korean and <span style="font-family: Courier New,Courier,monospace">en_US.UTF8</span> in case of American English. For more information, see the Linux locale information.
				</td>
			   				<td>
				When the <span style="font-family: Courier New,Courier,monospace">language_set</span> has changed.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_LOCALE_LANGUAGE</span> key.</td>
		</tr>
		<tr>
				<td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.region_format</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">region_format</span></td>
			   <td>The value of this key is the full name of the locale, for example, <span style="font-family: Courier New,Courier,monospace">ko_KR.UTF8</span> in case of the Korean region format and <span style="font-family: Courier New,Courier,monospace">en_US.UTF8</span> in case of the USA region format. For more information, see the Linux locale information.
				</td>
			   <td>
				When the region format has changed.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_LOCALE_COUNTRY</span> key.</td>
		</tr>
		<tr>
			   <td>sound</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.silent_mode</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">silent_mode</span></td>
			   <td><ul><li><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span></li>
				<li><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span></li></ul>
				</td>
			  	<td>
				When the ringtone has been changed to 0 or another mode. For example, if the call slider has been changed to 0, <span style="font-family: Courier New,Courier,monospace">silent_mode</span> is <span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span>. Otherwise, <span style="font-family: Courier New,Courier,monospace">silent_mode</span> is <span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span>.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_SOUND_SILENT_MODE</span> key.</td>
		</tr>
		<tr>
			   <td>vibration</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.vibration_state</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">vibration_state</span></td>
			   <td><ul><li><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span></li>
				<li><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span></li></ul>
				</td>
			   	<td>
				When the vibration state has changed.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">RUNTIME_INFO_KEY_VIBRATION_ENABLED</span> key.</td>
		</tr>
		<tr>
			   <td>screen</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.screen_autorotate_state</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">screen_autorotate_state</span></td>
			   <td><ul><li><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span></li>
				<li><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span></li></ul>
				</td>
			   	<td>
				When the <span style="font-family: Courier New,Courier,monospace">screen_autorotate_state</span> has been changed, for example, by the user toggling the display settings.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_DISPLAY_SCREEN_ROTATION_AUTO</span> key.</td>
		</tr>
		<tr>
			   <td rowspan="2">mobile</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.mobile_data_state</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">mobile_data_state</span></td>
			   <td><ul><li><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span></li>
				<li><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span></li></ul>
				</td>
			   	<td>
				When the <span style="font-family: Courier New,Courier,monospace">mobile_data_state</span> has been changed, for example, by the user toggling the network settings.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_3G_DATA_NETWORK_ENABLED</span> key.</td>
		</tr>
		<tr>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.data_roaming_state</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">data_roaming_state</span></td>
			   <td><ul><li><span style="font-family: Courier New,Courier,monospace">&quot;on&quot;</span></li>
				<li><span style="font-family: Courier New,Courier,monospace">&quot;off&quot;</span></li></ul>
				</td>
			   	<td>
				When the <span style="font-family: Courier New,Courier,monospace">data_roaming_state</span> has been changed, for example, by the user toggling the network settings.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">RUNTIME_INFO_KEY_DATA_ROAMING_ENABLED</span> key.</td>
		</tr>
		<tr>
			   <td>font</td>
			   <td><span style="font-family: Courier New,Courier,monospace">tizen.system.event.font_set</span></td>
			   <td><span style="font-family: Courier New,Courier,monospace">font_set</span></td>
			   <td>The value of this key is the font name of the string type by font-config.
				</td>
			   	<td>
				When the font has changed.
				</td>
				<td>You can get the current value with the <span style="font-family: Courier New,Courier,monospace">SYSTEM_SETTINGS_KEY_FONT_TYPE</span> key.</td>
		</tr>
	   </tbody>
</table>

<h2>Warm-up</h2>
<p>Become familiar with the Event API basics by learning about:</p>
	<ul>
		<li><a href="#prerequisites">Prerequisites</a>
		<p>Prepare your application to use the event functionality.</p></li>
		<li><a href="#manage">Subscribing to an Event</a>
		<p>Register an event handle to receive events.</p></li>
		<li><a href="#broadcast">Publishing an Event</a>
		<p>Broadcast an application event to all listeners.</p></li>	 
		<li><a href="#launch">Managing Launch-On-Events</a>
		<p>Launch service applications based on specific events.</p></li>	 		 
	</ul>

	<h2 id="prerequisites">Prerequisites</h2>

<p>To enable your application to use the event functionality:</p>
<ol>
<li>
<p>To use the functions and data types of the <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__EVENT__MODULE.html">Event</a> API, include the <span style="font-family: Courier New,Courier,monospace">&lt;app_event.h&gt;</span> header file in your application:</p>
<pre class="prettyprint">
#include &lt;app_event.h&gt;
</pre> 
</li>
<li>To use Launch-On-Events in your application, define the <span style="font-family: Courier New,Courier,monospace">http://tizen.org/appcontrol/operation/launch_on_event</span> operation in the <span style="font-family: Courier New,Courier,monospace">tizen-manifest.xml</span> file.
<p>The URI name for the operation represents the event name in the Launch-On-Event format (<span style="font-family: Courier New,Courier,monospace">event://{Event_Name}</span>).</p>

<pre class="prettyprint">
&lt;app-control&gt;
&nbsp;&nbsp;&nbsp;&lt;operation name=&quot;http://tizen.org/appcontrol/operation/launch_on_event&quot;/&gt;
&nbsp;&nbsp;&nbsp;&lt;uri name=&quot;event://tizen.system.event.battery_charger_status&quot;/&gt;
&lt;/app-control&gt;
</pre>
</li>
</ol> 

 <h2 id="manage" name="manage">Subscribing to an Event</h2>

<p>To subscribe to a predefined system event or user-defined event:</p>
<ol>
<li>Add an event handler.
<p>One event can have multiple event handlers, and one handler can be registered multiple times.</p>

<ul><li>Add an event handler for a system event:

<pre class="prettyprint">
static void
battery_event_callback(const char *event_name, bundle *event_data, void *user_data)
{
&nbsp;&nbsp;&nbsp;&nbsp;/* event_name is the event name */
&nbsp;&nbsp;&nbsp;&nbsp;dlog_print(DLOG_INFO, LOG_TAG, &quot;event_name is [%s]&quot;, event_name);

&nbsp;&nbsp;&nbsp;&nbsp;/* event_data is the event data, its type is bundle */
&nbsp;&nbsp;&nbsp;&nbsp;char *battery_level_status = NULL;
&nbsp;&nbsp;&nbsp;&nbsp;battery_level_status = bundle_get_val(event_data, EVENT_KEY_BATTERY_LEVEL_STATUS);
}

event_handler_h handler;

/* Register the event handler */
int ret = event_add_event_handler(SYSTEM_EVENT_BATTERY_LEVEL_STATUS,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(event_cb)battery_event_cb, user_data, &amp;handler);
if (ret != EVENT_ERROR_NONE)
&nbsp;&nbsp;&nbsp;&nbsp;dlog_print(DLOG_ERROR, LOG_TAG, &quot;err: [%d]&quot;, ret);
</pre>
</li>

<li>Add an event handler for a user-defined event:

<p>When defining an event name for a user event (such as <span style="font-family: Courier New,Courier,monospace">event.org.tizen.senderapp.user_event</span>), the name format is <span style="font-family: Courier New,Courier,monospace">event.{sender appid}.{user-defined name}</span>. The <span style="font-family: Courier New,Courier,monospace">{user-defined name}</span> must:</p>
<ul>
	<li>Contain only the ASCII characters &quot;[A-Z][a-z][0-9]_&quot; and not begin with a digit.</li>
	<li>Not contain the &#39;.&#39; (period) character.</li>
	<li>Not exceed the maximum name length (127 bytes).</li>
	<li>Be at least 1 byte in length.</li>
</ul>
<pre class="prettyprint">
ret = event_add_event_handler(&quot;event.org.tizen.senderapp.user_event&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;utc_event_cb_with_valid_check,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;CUSTOM_EVENT_KEY&quot;, &amp;event_handler);

if (ret != EVENT_ERROR_NONE)
&nbsp;&nbsp;&nbsp;&nbsp;dlog_print(DLOG_ERROR, LOG_TAG, &quot;err: [%d]&quot;, ret);
</pre>
</li></ul></li>

<li>When no longer needed, remove the event handler.
<p>A registered handler can be removed when application is running, and all registered handlers are removed when the application is terminated.</p>

<pre class="prettyprint">
ret = event_remove_event_handler(handler);
if (ret != EVENT_ERROR_NONE)
&nbsp;&nbsp;&nbsp;&nbsp;dlog_print(DLOG_ERROR, LOG_TAG, &quot;err: [%d]&quot;, ret);
</pre>
</li>

</ol>


 <h2 id="broadcast" name="broadcast">Publishing an Event</h2>
 
<p>To publish an event to all listeners:</p>

<ol>
<li>Create the callback for handling the event:
<pre class="prettyprint">
static void
user_event_cb(const char *event_name, bundle *event_data, void *user_data)
{
&nbsp;&nbsp;&nbsp;&nbsp;dlog_print(DLOG_INFO, LOG_TAG, &quot;user_event_cb: %s \n&quot;, event_name);

&nbsp;&nbsp;&nbsp;&nbsp;return;
}
</pre>
</li>
<li>Register the event handler and create the bundle for handling the event data:
<pre class="prettyprint">
int ret = EVENT_ERROR_NONE;
event_handler_h event_handler;
bundle *event_data = NULL;

ret = event_add_event_handler(&quot;event.org.tizen.senderapp.user_event&quot;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user_event_cb, &quot;CUSTOM_EVENT_KEY&quot;, &amp;event_handler);

if (ret != EVENT_ERROR_NONE)
&nbsp;&nbsp;&nbsp;&nbsp;dlog_print(DLOG_ERROR, LOG_TAG, &quot;err: [%d]&quot;, ret);

event_data = bundle_create();

ret = bundle_add_str(event_data, user_data_key, user_data);
</pre>
</li>
<li>Use the <span style="font-family: Courier New,Courier,monospace">event_publish_app_event()</span> function to publish the event:
<pre class="prettyprint">
ret = event_publish_app_event(&quot;event.org.tizen.senderapp.user_event&quot;, event_data);

if (ret != EVENT_ERROR_NONE)
&nbsp;&nbsp;&nbsp;&nbsp;dlog_print(DLOG_ERROR, LOG_TAG, &quot;err: [%d]&quot;, ret);
</pre>
</li>
<li>When no longer needed, free the bundle:
<pre class="prettyprint">
ret = bundle_free(event_data);
</pre>
</li>
</ol>
 
 <h2 id="launch" name="launch">Managing Launch-On-Events</h2>

   <table class="note"> 
   <tbody> 
    <tr> 
     <th class="note">Note</th> 
    </tr> 
    <tr> 
     <td class="note">Only service applications can register and receive Launch-On-Events.
	 <p>The Launch-On-Event operation cannot be requested using the <span style="font-family: Courier New,Courier,monospace">app_control_send_launch_request()</span> function, unlike other application control operations.</p></td> 
    </tr> 
   </tbody> 
  </table> 

<p>To receive the Launch-On-Event:</p>

<pre class="prettyprint">
static void
*app_control(app_control_h app_control, void *data)
{
&nbsp;&nbsp;&nbsp;&nbsp;char *event_uri = &quot;event://tizen.system.event.battery_charger_status&quot;;
&nbsp;&nbsp;&nbsp;&nbsp;char *operation;
&nbsp;&nbsp;&nbsp;&nbsp;char *uri;
&nbsp;&nbsp;&nbsp;&nbsp;char *event_value;
&nbsp;&nbsp;&nbsp;&nbsp;ret = app_control_get_operation(app_control, &amp;operation);

&nbsp;&nbsp;&nbsp;&nbsp;if (ret == APP_CONTROL_ERROR_NONE &amp;&amp; operation &amp;&amp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcmp(operation, APP_CONTROL_OPERATION_LAUNCH_ON_EVENT) == 0) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = app_control_get_uri(app_control, &amp;uri);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ret == APP_CONTROL_ERROR_NONE &amp;&amp; uri) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (strncmp(uri, event_uri, strlen(event_uri) + 1) == 0) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret = app_control_get_extra_data(app_control, &quot;battery_charger_status&quot;, &amp;event_value);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ret == APP_CONTROL_ERROR_NONE &amp;&amp; event_value)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(event_value);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Use event_add_event_handler() for further event subscriptions here */
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(uri);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(operation);
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</pre>
<p>The application can get the event name and data in the first <span style="font-family: Courier New,Courier,monospace">app_control_cb()</span> callback, which is called after the application state changes to <span style="font-family: Courier New,Courier,monospace">created</span>.</p>

<script type="text/javascript" src="../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>	