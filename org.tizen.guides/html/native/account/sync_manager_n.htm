<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=9" />
	<link rel="stylesheet" type="text/css" href="../../css/styles.css" />
	<link rel="stylesheet" type="text/css" href="../../css/snippet.css" />
	<script type="text/javascript" src="../../scripts/snippet.js"></script>
	<script type="text/javascript" src="../../scripts/jquery.util.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/common.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/core.js" charset="utf-8"></script>
	<script type="text/javascript" src="../../scripts/search.js" charset="utf-8"></script>

	<title>Sync Manager</title>
</head>

<body onload="prettyPrint()" style="overflow: auto;">

<div id="toc-navigation">
	<div id="profile">
		<p><img alt="Mobile native" src="../../images/mobile_s_n.png"/></p>
	</div>

	<div id="toc_border"><div id="toc">

		<p class="toc-title">Related Info</p>
		<ul class="toc">
			<li><a href="../../../../org.tizen.tutorials/html/native/account/sync_manager_tutorial_n.htm">Sync Manager Tutorial</a></li>
			<li><a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__SYNC__MANAGER__MODULE.html">Sync Manager API for Mobile Native</a></li>
		</ul>
	</div></div>
</div>

<div id="container"><div id="contents"><div class="content">
<h1>Sync Manager</h1>
<p>Tizen provides notifications for a service application to maintain data consistency between a server and the device. You can manage the synchronization schedule for applications.</p>

<p>This feature is supported in mobile applications only.</p>
<p>The service and UI applications must have the same package name.</p>

<p>The main Sync Manager API features are:</p>
<ul>
<li>Adding on-demand sync job schedules</li>
<li>Adding periodic sync job schedules</li>
<li>Adding data change sync job schedules</li>
<li>Removing registered sync job schedules</li>
<li>Iterating registered sync job schedules</li>
</ul>
<p>The sync manager operates the sync jobs based on the rules defined in the following table.</p>
  <table>
  <caption>Table: Sync job scheduling rules
  </caption>
   <tbody>
    <tr>
     <th>Rule</th>
     <th>Description</th>
    </tr>
    <tr>
     <td>Data changes on the server</td>
     <td>A server sends a push message to the account provider service and service applications. When the data is changed on the server, a push message is sent from the server. Then, the device which receives the push message can trigger an on-demand sync job.</td>
    </tr>
    <tr>
     <td>Data changes on the device</td>
     <td>A subscribed callback function is invoked whenever a database change occurs for a registered capability. The data change listener notices the changes by using the <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__SOCIAL__CALENDAR__SVC__MODULE.html">Calendar</a>, <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__SOCIAL__CONTACTS__SVC__MODULE.html">Contacts</a>, and <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__MEDIA__CONTENT__MODULE.html">Media Content</a> APIs. If there are any changes in the corresponding data, the sync manager notices the changes and schedules a sync job.
	 <p>Changing data in the Calendar database includes adding, updating, and deleting books, events, and todos. Changing data in the Contacts database includes adding, removing, and modifying contacts. The Media Content provides notifications for changes in media types, such as image, music, sound, and video.</p></td>
    </tr>
    <tr>
     <td>Network availability</td>
     <td>When a status change in the Wi-Fi or data network is detected, behavior of sync operation is changed.</td>
    </tr>
    <tr>
     <td>On demand sync</td>
     <td>The on-demand sync means that you can schedule a sync job once. You can use this feature with the <span style="font-family: Courier New,Courier,monospace">sync_manager_on_demand_sync_job()</span> function.</td>
    </tr>
    <tr>
     <td>Periodic sync</td>
     <td>The periodic sync means that you can schedule a sync job to be performed regularly. You can use this feature with the <span style="font-family: Courier New,Courier,monospace">sync_manager_add_periodic_sync_job()</span> function. You can also use the sync intervals through various enumerators provided through the Sync Manager API.
	 <p>When using the Sync Manager API, you can set an alarm indirectly. Consequently, the <span style="font-family: Courier New,Courier,monospace">http://tizen.org/privilege/alarm.set</span> privilege is required.</p></td>
    </tr>
   </tbody>
  </table>

<p>The following table lists the variables used with the sync manager.</p>
<table border="1">
       <caption>Table: Sync manager variables</caption>
       <tbody>
	   <tr>
               <th>Variable</th>
               <th>Data type</th>
               <th>Mandatory</th>
               <th>Description</th>
       </tr>
       <tr>
               <td>Account handle</td>
               <td><span style="font-family: Courier New,Courier,monospace">account_s*</span></td>
               <td>No</td>
               <td>Handle of the account module for managing account-related data.</td>
       </tr>
       <tr>
               <td>Sync job name</td>
               <td><span style="font-family: Courier New,Courier,monospace">const char*</span></td>
               <td>Yes</td>
               <td>Sync job name for managing sync jobs.
			   <p>The on-demand and periodic sync jobs can be managed by a user-defined name. If the <span style="font-family: Courier New,Courier,monospace">sync_manager_add_periodic_sync_job()</span> function is called again with same sync job name (where all details except the name and sync job ID are changed), the function does not add a new sync job but updates the existing job. This is mainly used to reset the periodic interval.</p></td>
       </tr>
       <tr>
               <td>Sync capability</td>
               <td><span style="font-family: Courier New,Courier,monospace">const char*</span></td>
               <td>Yes</td>
               <td>Capability for adding data change sync jobs.
			   <p>A data change sync job can provide a notification whenever a corresponding data change occurs. If the <span style="font-family: Courier New,Courier,monospace">sync_manager_add_data_change_sync_job()</span> function is used with a capability, it is operated for the related capability only. In the case of using the calendar or contact capability, the respective <span style="font-family: Courier New,Courier,monospace">http://tizen.org/privilege/calendar.read</span> or <span style="font-family: Courier New,Courier,monospace">http://tizen.org/privilege/contact.read</span> privilege is required.</p>
			   <p>The following capabilities are available:</p>
			   <pre class="prettyprint">
#define SYNC_SUPPORTS_CAPABILITY_CALENDAR &quot;http://tizen.org/sync/capability/calendar&quot;
#define SYNC_SUPPORTS_CAPABILITY_CONTACT &quot;http://tizen.org/sync/capability/contact&quot;
#define SYNC_SUPPORTS_CAPABILITY_IMAGE &quot;http://tizen.org/sync/capability/image&quot;
#define SYNC_SUPPORTS_CAPABILITY_MUSIC &quot;http://tizen.org/sync/capability/music&quot;
#define SYNC_SUPPORTS_CAPABILITY_SOUND &quot;http://tizen.org/sync/capability/sound&quot;
#define SYNC_SUPPORTS_CAPABILITY_VIDEO &quot;http://tizen.org/sync/capability/video&quot;</pre></td>
       </tr>
       <tr>
               <td>Sync period</td>
               <td><span style="font-family: Courier New,Courier,monospace">sync_period_e</span></td>
               <td>Yes</td>
       <td>Interval for adding periodic sync jobs.
	   <p>If the interval is provided, the sync job is performed periodically. If you set the periodic interval to 30 minutes, a time interval is set as a power of 2 less than 30. This means that a time interval set to 16 minutes operates the sync job every 16 minutes while skipping the first notification (so the first is in 32 minutes). The same logic applies to other cases.</p>
	   <p>This variable provides a periodic sync job with an inexact time. Coupling various periodic sync jobs with an interval as a power of 2  prevents the device from waking up the service application too many times.</p>
	   <p>The <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__SYNC__MANAGER__MODULE.html#gad6f301bc84c4e758aee1636b0122dd7e">sync_period_e</a> enumerator defines the available period intervals.</p></td>
       </tr>
       <tr>
               <td>Sync option</td>
               <td><span style="font-family: Courier New,Courier,monospace">sync_option_e</span></td>
               <td>Yes</td>
               <td>Option for deciding sync job behavior.
			   <p>The behavior options can be used as an OR value. For example, the <span style="font-family: Courier New,Courier,monospace">(SYNC_OPTION_EXPEDITED | SYNC_OPTION_NO_RETRY)</span> expression is available, and means that the &quot;Sync job is operated just once with priority&quot;.</p>
			   <p>The following options are available:</p>
			   <ul><li><span style="font-family: Courier New,Courier,monospace">SYNC_OPTION_NONE</span>: Sync job is operated normally</li>
			   <li><span style="font-family: Courier New,Courier,monospace">SYNC_OPTION_EXPEDITED</span>: Sync job is operated as soon as possible</li>
			   <li><span style="font-family: Courier New,Courier,monospace">SYNC_OPTION_NO_RETRY</span>: Sync job is not performed again when it fails</li></ul></td>
       </tr>
       <tr>
               <td>Sync job ID</td>
               <td><span style="font-family: Courier New,Courier,monospace">int*</span></td>
               <td>Yes</td>
               <td>Unique ID for managing sync jobs.
			   <p>The ID is generated when a sync job is added. It is required to remove the sync job. The number of ID that can be generated is restricted to a hundred per a package.</p></td>
       </tr>
       <tr>
               <td>Sync job user data</td>
               <td><span style="font-family: Courier New,Courier,monospace">bundle*</span></td>
               <td>No</td>
               <td>User data for sync jobs.
			   <p>The data can contain additional information related to the registered sync jobs.</p></td>
       </tr>
       <tr>
               <td>User data</td>
               <td><span style="font-family: Courier New,Courier,monospace">void*</span></td>
               <td>No</td>
               <td>User data for the <span style="font-family: Courier New,Courier,monospace">sync_manager_for_each_sync_job()</span> function.
			   <p>The data can contain additional information related to the foreach jobs.</p></td>
       </tr>
       </tbody>
</table>


<h2>Sync Adapter</h2>

 <table class="note">
   <tbody>
    <tr>
     <th class="note">Note</th>
    </tr>
    <tr>
     <td class="note">The <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__SYNC__ADAPTER__MODULE.html">Sync Adapter</a> API operations must be carried out by a service application (which operates data synchronization) before using the Sync Manager API.
<p>The number of service applications that can set callbacks is restricted to only one per a package.</p></td>
    </tr>
   </tbody>
 </table>

 <p>The Sync Adapter API allows you to:</p>
<ul>
<li>Register callbacks for receiving notifications about the sync job start and cancellation.</li>
<li>Start a sync operation with an app control, so that the application&#39;s daemon needs not to stay awake.
<p>The Sync Adapter API allows you to use this mechanism without using the <a href="../../../../org.tizen.native.mobile.apireference/group__CAPI__APP__CONTROL__MODULE.html">App Control</a> API separately. In other words, when using  the Sync Adapter API, you can use the App Control API indirectly.</p>
 </li>

</ul>


<script type="text/javascript" src="../../scripts/jquery.zclip.min.js"></script>
<script type="text/javascript" src="../../scripts/showhide.js"></script>
</div></div></div>

<a class="top sms" href="#"><img src="../../images/btn_top.gif" alt="Go to top" /></a>

<div id="footer">
<p class="footer">Except as noted, this content - excluding the Code Examples - is licensed under <a href="http://creativecommons.org/licenses/by/3.0/legalcode" target="_blank">Creative Commons Attribution 3.0</a> and all of the Code Examples contained herein are licensed under <a href="https://www.tizen.org/bsd-3-clause-license" target="_blank">BSD-3-Clause</a>.<br/>For details, see the <a href="https://www.tizen.org/content-license" target="_blank">Content License</a>.</p>
</div>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-25976949-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

</body>
</html>

